local _1,_2,_3=game:GetService"Players",game:GetService"RunService",game:GetService"Workspace"
local _4=game:GetService("Lighting")
local _5=Instance.new("ScreenGui",game:GetService"CoreGui")
_5.Name="MobileWindUI"
_5.ZIndexBehavior=Enum.ZIndexBehavior.Sibling
local _6=_1.LocalPlayer

local function _7(t,p)local _=Instance.new(t)for k,v in pairs(p)do _[k]=v end return _ end

local _8,_9,_10,_11,_12,_13,_14,_15,_16={},{},false,false,false,false,false,false,false
local _17={}
local _18=50
local _19=nil
local _20=nil
local _21=nil
local _22=nil
local _23=nil
local _24=0.1
local _25=nil

local _26=true
local _27=true

local _28=false
local _29=nil
local _30=0

local _31=false
local _32={}

local _33=false
local _34=nil

local _35=false

local _36=false
local _37={}

local function _38(tp)
    if tp==_6 or _9[tp.Name]then return end 
    local c=tp.Character 
    local lc=_6.Character 
    if not(c and c:FindFirstChild("Head")and lc)then return end 
    local h=c.Head 
    for _,tp in ipairs{lc:FindFirstChild("LeftHand"),lc:FindFirstChild("RightHand"),lc:FindFirstChild("LeftFoot"),lc:FindFirstChild("RightFoot"),lc:FindFirstChild("Head")}do 
        if tp then 
            firetouchinterest(h,tp,0)
            firetouchinterest(h,tp,1)
        end 
    end 
end

local function _39()
    local success, err = pcall(function()
        local data = {}
        for name, enabled in pairs(_17) do
            if enabled then
                table.insert(data, name)
            end
        end
        writefile("permanent_blacklist.txt", table.concat(data, "\n"))
    end)
    if not success then
        warn("Save permanent blacklist failed:", err)
    end
end

local function _40()
    local success, err = pcall(function()
        if isfile("permanent_blacklist.txt") then
            local content = readfile("permanent_blacklist.txt")
            for line in content:gmatch("[^\r\n]+") do
                if line and line ~= "" then
                    _17[line] = true
                end
            end
        end
    end)
    if not success then
        warn("Load permanent blacklist failed:", err)
    end
end

_40()

local function _41()
    local hasEnabled = false
    
    for _, player in pairs(_1:GetPlayers()) do
        if _17[player.Name] and player ~= _6 then
            print("Detected permanent blacklist player:", player.Name)
            
            if _27 and not _10 then
                _10 = true
                print("Auto enabled auto-kill")
            end
            
            if _26 and not _11 then
                _11 = true
                print("Auto enabled auto-punch")
            end
            
            hasEnabled = true
            break
        end
    end
    
    return hasEnabled
end

_1.PlayerAdded:Connect(function(player)
    if _17[player.Name] then
        print("Permanent blacklist player joined:", player.Name)
        _41()
    end
end)

task.spawn(function()
    task.wait(3)
    while true do
        _41()
        task.wait(5)
    end
end)

task.spawn(function()
    task.wait(2)
    _41()
end)

local function _42(toolPatterns)
    local backpack = _6:FindFirstChild("Backpack")
    if not backpack then return nil end
    
    for _, tool in pairs(backpack:GetChildren()) do
        if tool:IsA("Tool") then
            local toolName = string.lower(tool.Name)
            for _, pattern in ipairs(toolPatterns) do
                if toolName:find(pattern) then
                    return tool
                end
            end
        end
    end
    return nil
end

local function _43()
    if not _28 then return end
    
    local character = _6.Character
    if not character then return end
    
    local humanoid = character:FindFirstChild("Humanoid")
    if not humanoid or humanoid.Health <= 0 then return end
    
    print("Equipping tools on respawn...")
    
    local proteinEgg = _42({"protein", "egg", "蛋白质"})
    local punchTool = _42({"punch", "fist"})
    
    humanoid:UnequipTools()
    
    if proteinEgg then
        humanoid:EquipTool(proteinEgg)
        print("Equipped protein egg")
        
        task.wait(0.1)
    end
    
    if punchTool then
        humanoid:EquipTool(punchTool)
        print("Equipped fist tool")
    end
    
    print("Tools equipped (only equip, not use)")
end

local function _44()
    if _36 then return end
    
    print("Optimizing graphics...")
    
    _37 = {
        lighting = {
            Brightness = _4.Brightness,
            Ambient = _4.Ambient,
            FogColor = _4.FogColor,
            FogStart = _4.FogStart,
            FogEnd = _4.FogEnd,
            GlobalShadows = _4.GlobalShadows,
            Technology = _4.Technology
        },
        workspace = {
            StreamingEnabled = _3.StreamingEnabled,
            StreamingMinRadius = _3.StreamingMinRadius,
            StreamingTargetRadius = _3.StreamingTargetRadius
        }
    }
    
    _4.Brightness = 0.05
    _4.Ambient = Color3.fromRGB(5, 5, 5)
    _4.FogColor = Color3.fromRGB(0, 0, 0)
    _4.FogStart = 0
    _4.FogEnd = 100
    _4.GlobalShadows = false
    _4.Technology = Enum.Technology.Legacy
    
    _3.StreamingEnabled = false
    _3.StreamingMinRadius = 500
    _3.StreamingTargetRadius = 100
    
    for _, obj in pairs(_4:GetChildren()) do
        if obj:IsA("Sky") or obj:IsA("Atmosphere") or 
           obj:IsA("BloomEffect") or obj:IsA("BlurEffect") or
           obj:IsA("SunRaysEffect") or obj:IsA("ColorCorrectionEffect") then
            obj:Destroy()
        end
    end
    
    local camera = workspace.CurrentCamera
    if camera then
        camera.FieldOfView = 70
    end
    
    _36 = true
    print("Graphics optimization completed")
end

local function _45()
    if not _36 then return end
    
    print("Restoring original graphics...")
    
    if _37.lighting then
        _4.Brightness = _37.lighting.Brightness
        _4.Ambient = _37.lighting.Ambient
        _4.FogColor = _37.lighting.FogColor
        _4.FogStart = _37.lighting.FogStart
        _4.FogEnd = _37.lighting.FogEnd
        _4.GlobalShadows = _37.lighting.GlobalShadows
        _4.Technology = _37.lighting.Technology
    end
    
    if _37.workspace then
        _3.StreamingEnabled = _37.workspace.StreamingEnabled
        _3.StreamingMinRadius = _37.workspace.StreamingMinRadius
        _3.StreamingTargetRadius = _37.workspace.StreamingTargetRadius
    end
    
    _36 = false
    print("Graphics restored")
end

local function _46(enabled)
    _31 = enabled
    
    if enabled then
        print("Applying black workspace effect...")
        
        _44()
        
        _32.lighting = {
            skyboxBk = _4.skyboxBk,
            skyboxDn = _4.skyboxDn,
            skyboxFt = _4.skyboxFt,
            skyboxLf = _4.skyboxLf,
            skyboxRt = _4.skyboxRt,
            skyboxUp = _4.skyboxUp
        }
        
        _4.skyboxBk = ""
        _4.skyboxDn = ""
        _4.skyboxFt = ""
        _4.skyboxLf = ""
        _4.skyboxRt = ""
        _4.skyboxUp = ""
        
        for _, obj in pairs(_4:GetChildren()) do
            if obj:IsA("Sky") or obj:IsA("Atmosphere") then
                obj:Destroy()
            end
        end
        
        _32.parts = {}
        
        task.spawn(function()
            local startTime = tick()
            local processed = 0
            
            for _, part in pairs(_3:GetDescendants()) do
                if part:IsA("BasePart") then
                    _32.parts[part] = {
                        color = part.Color,
                        material = part.Material,
                        transparency = part.Transparency
                    }
                    
                    part.Color = Color3.fromRGB(0, 0, 0)
                    part.Material = Enum.Material.SmoothPlastic
                    part.Transparency = 0.7
                    
                elseif part:IsA("Decal") then
                    _32.parts[part] = {
                        texture = part.Texture,
                        transparency = part.Transparency
                    }
                    
                    part.Texture = ""
                    part.Transparency = 0.8
                end
                
                processed = processed + 1
                
                if processed % 100 == 0 then
                    if not _31 then
                        break
                    end
                    task.wait(0.01)
                end
            end
            
            print(string.format("Black workspace completed, processed %d objects, took %.2f seconds", 
                  processed, tick() - startTime))
            
            local newPartsConnection
            newPartsConnection = _3.DescendantAdded:Connect(function(part)
                if not _31 then
                    newPartsConnection:Disconnect()
                    return
                end
                
                if part:IsA("BasePart") then
                    part.Color = Color3.fromRGB(0, 0, 0)
                    part.Material = Enum.Material.SmoothPlastic
                    part.Transparency = 0.7
                elseif part:IsA("Decal") then
                    part.Texture = ""
                    part.Transparency = 0.8
                end
            end)
            
            _32.newPartsConnection = newPartsConnection
            
            while _31 do
                task.wait(1)
            end
            
            if newPartsConnection then
                newPartsConnection:Disconnect()
            end
        end)
        
        print("Black workspace effect applied")
        
    else
        _31 = false
        print("Restoring original workspace...")
        
        if _32.lighting then
            _4.skyboxBk = _32.lighting.skyboxBk
            _4.skyboxDn = _32.lighting.skyboxDn
            _4.skyboxFt = _32.lighting.skyboxFt
            _4.skyboxLf = _32.lighting.skyboxLf
            _4.skyboxRt = _32.lighting.skyboxRt
            _4.skyboxUp = _32.lighting.skyboxUp
        end
        
        if _32.parts then
            local restored = 0
            for part, data in pairs(_32.parts) do
                if part and part.Parent then
                    if part:IsA("BasePart") then
                        part.Color = data.color
                        part.Material = data.material
                        part.Transparency = data.transparency
                    elseif part:IsA("Decal") then
                        part.Texture = data.texture
                        part.Transparency = data.transparency
                    end
                    restored = restored + 1
                end
                
                if restored % 100 == 0 then
                    task.wait(0.01)
                end
            end
            print(string.format("Restored %d objects", restored))
        end
        
        _45()
        
        _32 = {}
        print("Workspace restored")
    end
end

local m=_7("Frame",{Name="MainWindow",Size=UDim2.new(0,380,0,450),Position=UDim2.new(0,20,0,50),BackgroundColor3=Color3.fromRGB(255,240,245),BorderSizePixel=0,Parent=_5})

_7("UIGradient",{Rotation=90,Color=ColorSequence.new({ColorSequenceKeypoint.new(0,Color3.fromRGB(255,250,255)),ColorSequenceKeypoint.new(0.3,Color3.fromRGB(255,235,245)),ColorSequenceKeypoint.new(0.7,Color3.fromRGB(255,220,235)),ColorSequenceKeypoint.new(1,Color3.fromRGB(255,210,225))}),Parent=m})

_7("UICorner",{CornerRadius=UDim.new(0,16)}).Parent=m
_7("UIStroke",{Color=Color3.fromRGB(255,160,200),Thickness=3}).Parent=m

local pc=_7("Frame",{Size=UDim2.new(1,0,1,0),BackgroundTransparency=1,Parent=m})

local function CP()
    for i=1,40 do 
        local pa=_7("TextLabel",{Size=UDim2.new(0,30,0,30),BackgroundTransparency=1,Text="Kolilxi_Joey_XYsia",TextColor3=Color3.fromRGB(math.random(200,255),math.random(100,200),math.random(150,220)),TextTransparency=0.9,TextSize=math.random(12,16),Font=Enum.Font.GothamBold,Parent=pc})
        local sx=0.5+math.cos(math.random()*6.28)*math.random()*0.3
        local sy=0.5+math.sin(math.random()*6.28)*math.random()*0.3
        pa.Position=UDim2.new(sx,-15,sy,-15)
        local sp=math.random(0.5,1.5)*0.003
        local a=math.random()*6.28
        local mx=math.cos(a)*sp
        local my=math.sin(a)*sp
        task.spawn(function()
            local t=0.7 
            local r=0 
            local fs=math.random(0.02,0.05)
            local rs=math.random(-2,2)
            while pa and pa.Parent and t<1 do 
                t=t+fs 
                r=r+rs 
                pa.Position=UDim2.new(pa.Position.X.Scale+mx,-15,pa.Position.Y.Scale+my,-15)
                pa.TextTransparency=t 
                pa.Rotation=r 
                if pa.Position.X.Scale<-0.5 or pa.Position.X.Scale>1.5 or pa.Position.Y.Scale<-0.5 or pa.Position.Y.Scale>1.5 then 
                    pa:Destroy()
                    break 
                end 
                task.wait(0.02)
            end 
            if pa and pa.Parent then 
                pa:Destroy()
            end 
        end)
    end 
end

CP()
task.spawn(function()
    while task.wait(2)do 
        if #pc:GetChildren()<20 then 
            CP()
        end 
    end 
end)

local tb=_7("TextButton",{Size=UDim2.new(1,0,0,35),BackgroundColor3=Color3.fromRGB(255,225,235),Text="",AutoButtonColor=false,Parent=m})
_7("UICorner",{CornerRadius=UDim.new(0,16,0,0)}).Parent=tb

_7("TextLabel",{Size=UDim2.new(0.6,0,1,0),Position=UDim2.new(0,10,0,0),BackgroundTransparency=1,Text="YsiaPro",TextColor3=Color3.fromRGB(200,70,130),TextSize=14,Font=Enum.Font.GothamBold,TextXAlignment=Enum.TextXAlignment.Left,Parent=tb})
_7("TextLabel",{Size=UDim2.new(0.4,0,1,0),Position=UDim2.new(0.6,-10,0,0),BackgroundTransparency=1,Text="Now 0",TextColor3=Color3.fromRGB(180,100,150),TextSize=12,Font=Enum.Font.GothamBold,TextXAlignment=Enum.TextXAlignment.Right,Parent=tb})

local function CB(n,px,t,ts)
    local b=_7("TextButton",{Name=n,Size=UDim2.new(0,28,0,28),Position=UDim2.new(1,px,0.5,-14),AnchorPoint=Vector2.new(0.5,0.5),BackgroundColor3=Color3.fromRGB(255,200,220),Text=t,TextColor3=Color3.fromRGB(180,60,120),TextSize=ts,Font=Enum.Font.GothamBold,AutoButtonColor=false,Parent=tb})
    _7("UICorner",{CornerRadius=UDim.new(0,6)}).Parent=b 
    return b 
end

local mn=CB("MinimizeButton",-65,"─",20)
local cl=CB("CloseButton",-30,"✕",16)
local cf=_7("Frame",{Size=UDim2.new(1,-20,0,40),Position=UDim2.new(0,10,0,40),BackgroundTransparency=1,Parent=m})
_7("UIListLayout",{FillDirection=Enum.FillDirection.Horizontal,Padding=UDim.new(0,5),Parent=cf})

local cs={{"Kill",Color3.fromRGB(255,120,150)},{"Optim",Color3.fromRGB(255,150,180)},{"Assistan",Color3.fromRGB(255,180,200)}}
local sc="Kill"
local bc=_7("Frame",{Name="ButtonsContainer",Size=UDim2.new(1,-20,0,350),Position=UDim2.new(0,10,0,90),BackgroundTransparency=1,Parent=m})

local cc={}
for i,c in ipairs(cs)do 
    local cb=_7("TextButton",{Name=c[1].."Tab",Size=UDim2.new(1/3,-5,1,0),BackgroundColor3=c[2],BackgroundTransparency=i==1 and 0.1 or 0.3,Text=c[1],TextColor3=Color3.fromRGB(200,70,130),TextSize=12,Font=Enum.Font.GothamBold,AutoButtonColor=false,Parent=cf})
    _7("UICorner",{CornerRadius=UDim.new(0,6)}).Parent=cb 
    _7("UIStroke",{Color=c[2],Thickness=i==1 and 3 or 2,Parent=cb})
    
    local bc=_7("ScrollingFrame",{Name=c[1].."Container",Size=UDim2.new(1,0,1,0),BackgroundTransparency=1,ScrollBarThickness=3,ScrollBarImageColor3=c[2],CanvasSize=UDim2.new(0,0,0,0),Visible=c[1]=="Kill",Parent=bc})
    local bl=_7("UIListLayout",{Padding=UDim.new(0,6),Parent=bc})
    bl:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()bc.CanvasSize=UDim2.new(0,0,0,bl.AbsoluteContentSize.Y)end)
    
    cc[c[1]]={container=bc,list=bl,button=cb}
end

local function SC(cn)
    for n,d in pairs(cc)do 
        d.container.Visible=n==cn 
        d.button.BackgroundTransparency=n==cn and 0.1 or 0.3 
        d.button:FindFirstChild("UIStroke").Thickness=n==cn and 3 or 2 
    end 
    sc=cn 
end

for n,d in pairs(cc)do 
    d.button.MouseEnter:Connect(function()
        if sc~=n then 
            d.button.BackgroundTransparency=0.2 
        end 
    end)
    d.button.MouseLeave:Connect(function()
        if sc~=n then 
            d.button.BackgroundTransparency=0.3 
        end 
    end)
    d.button.InputBegan:Connect(function(i)
        if i.UserInputType==Enum.UserInputType.MouseButton1 then 
            d.button.BackgroundTransparency=0 
        end 
    end)
    d.button.InputEnded:Connect(function(i)
        if i.UserInputType==Enum.UserInputType.MouseButton1 then 
            SC(n)
        end 
    end)
end

local im=false
local id=false
local rb=CB("ResetPositionButton",-25,"R",10)
rb.Position=UDim2.new(1,-25,1,-25)
rb.Parent=m

rb.MouseButton1Click:Connect(function()
    rb.BackgroundColor3=Color3.fromRGB(255,180,200)
    m.Position=UDim2.new(0,20,0,50)
    task.wait(0.1)
    rb.BackgroundColor3=Color3.fromRGB(255,200,220)
end)

local function TM()
    im=not im 
    m.Size=im and UDim2.new(0,m.Size.X.Offset,0,35)or UDim2.new(0,380,0,450)
    cf.Visible=not im 
    bc.Visible=not im 
    mn.Text=im and"+"or"─"
end

mn.MouseButton1Click:Connect(function()
    mn.BackgroundColor3=Color3.fromRGB(255,180,200)
    TM()
    task.wait(0.1)
    mn.BackgroundColor3=Color3.fromRGB(255,200,220)
end)

cl.MouseButton1Click:Connect(function()
    cl.BackgroundColor3=Color3.fromRGB(255,180,200)
    task.wait(0.1)
    _5:Destroy()
end)

local function C(cn,bn,bd,tf)
    if not cc[cn]then return end 
    local c=cc[cn].container 
    local cl
    for _,ct in ipairs(cs)do 
        if ct[1]==cn then 
            cl=ct[2]
            break 
        end 
    end
    
    local b=_7("TextButton",{Name=bn.."Button",Size=UDim2.new(1,0,0,45),BackgroundColor3=Color3.fromRGB(255,235,245),Text="",AutoButtonColor=false,Parent=c})
    _7("UICorner",{CornerRadius=UDim.new(0,8)}).Parent=b 
    _7("UIStroke",{Color=cl,Thickness=2}).Parent=b
    
    _7("TextLabel",{Size=UDim2.new(1,-20,0.7,0),Position=UDim2.new(0,10,0,0),BackgroundTransparency=1,Text=bn,TextColor3=cl,TextSize=13,Font=Enum.Font.GothamBold,TextXAlignment=Enum.TextXAlignment.Left,Parent=b})
    _7("TextLabel",{Size=UDim2.new(1,-20,0.3,0),Position=UDim2.new(0,10,0.7,0),BackgroundTransparency=1,Text=bd,TextColor3=Color3.fromRGB(180,100,150),TextSize=10,Font=Enum.Font.Gotham,TextXAlignment=Enum.TextXAlignment.Left,Parent=b})
    
    local si=_7("Frame",{Name="StatusIndicator",Size=UDim2.new(0,6,0,6),Position=UDim2.new(1,-20,0.5,-3),AnchorPoint=Vector2.new(0.5,0.5),BackgroundColor3=Color3.fromRGB(220,150,180),BorderSizePixel=0,Parent=b})
    _7("UICorner",{CornerRadius=UDim.new(1,0)}).Parent=si 
    local ba=false
    
    local function UC()
        if ba then 
            b.BackgroundColor3=cl 
            si.BackgroundColor3=Color3.fromRGB(255,255,255)
            b:FindFirstChild("TextLabel").TextColor3=Color3.fromRGB(255,255,255)
        else 
            b.BackgroundColor3=Color3.fromRGB(255,235,245)
            si.BackgroundColor3=Color3.fromRGB(220,150,180)
            b:FindFirstChild("TextLabel").TextColor3=cl 
        end 
    end 
    UC()
    
    b.MouseButton1Click:Connect(function()
        ba=not ba 
        UC()
        if tf then 
            pcall(tf,ba)
        end 
    end)
end

local function PLW(dn,lt)
    local tl=lt=="b"and _8 or _9 
    if _5:FindFirstChild(dn.."Overlay")then 
        _5:FindFirstChild(dn.."Overlay"):Destroy()
    end 
    
    local o=_7("Frame",{Name=dn.."Overlay",Size=UDim2.new(0,380,0,400),Position=m.Position,BackgroundColor3=m.BackgroundColor3,BorderSizePixel=0,Parent=_5})
    
    _7("UIGradient",{Rotation=90,Color=ColorSequence.new({ColorSequenceKeypoint.new(0,Color3.fromRGB(255,250,255)),ColorSequenceKeypoint.new(0.3,Color3.fromRGB(255,235,245)),ColorSequenceKeypoint.new(0.7,Color3.fromRGB(255,220,235)),ColorSequenceKeypoint.new(1,Color3.fromRGB(255,210,225))}),Parent=o})
    _7("UICorner",{CornerRadius=UDim.new(0,16)}).Parent=o 
    _7("UIStroke",{Color=Color3.fromRGB(255,160,200),Thickness=3}).Parent=o
    
    local ot=_7("TextButton",{Size=UDim2.new(1,0,0,35),BackgroundColor3=Color3.fromRGB(255,225,235),Text="",AutoButtonColor=false,Parent=o})
    _7("UICorner",{CornerRadius=UDim.new(0,16,0,0)}).Parent(ot)
    
    _7("TextLabel",{Size=UDim2.new(0.7,0,1,0),Position=UDim2.new(0,10,0,0),BackgroundTransparency=1,Text=dn.."Management",TextColor3=Color3.fromRGB(200,70,130),TextSize=14,Font=Enum.Font.GothamBold,TextXAlignment=Enum.TextXAlignment.Left,Parent=ot})
    
    local cl=_7("TextLabel",{Size=UDim2.new(0.3,0,1,0),Position=UDim2.new(0.7,-10,0,0),BackgroundTransparency=1,Text="Count: 0",TextColor3=Color3.fromRGB(180,100,150),TextSize=12,Font=Enum.Font.GothamBold,TextXAlignment=Enum.TextXAlignment.Right,Parent=ot})
    
    local cb=_7("TextButton",{Size=UDim2.new(0,28,0,28),Position=UDim2.new(1,-35,0.5,-14),AnchorPoint=Vector2.new(0,0.5),BackgroundColor3=Color3.fromRGB(255,200,220),Text="✕",TextColor3=Color3.fromRGB(180,60,120),TextSize=16,Font=Enum.Font.GothamBold,AutoButtonColor=false,Parent=ot})
    _7("UICorner",{CornerRadius=UDim.new(0,6)}).Parent(cb)
    
    local ps=_7("ScrollingFrame",{Size=UDim2.new(1,-20,1,-55),Position=UDim2.new(0,10,0,40),BackgroundTransparency=1,ScrollBarThickness=4,ScrollBarImageColor3=Color3.fromRGB(255,160,200),CanvasSize=UDim2.new(0,0,0,0),Parent=o})
    local pl=_7("UIListLayout",{Padding=UDim.new(0,6),SortOrder=Enum.SortOrder.LayoutOrder,Parent=ps})
    pl:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()ps.CanvasSize=UDim2.new(0,0,0,pl.AbsoluteContentSize.Y)end)
    
    local function CPI(pl)
        local il=tl[pl.Name]or false 
        local it=_7("TextButton",{Name="PlayerItem_"..pl.UserId,Size=UDim2.new(1,0,0,40),BackgroundColor3=il and Color3.fromRGB(255,220,220)or Color3.fromRGB(255,235,245),Text="",AutoButtonColor=false,LayoutOrder=pl.UserId,Parent=ps})
        _7("UICorner",{CornerRadius=UDim.new(0,8)}).Parent(it) 
        _7("UIStroke",{Color=il and Color3.fromRGB(255,120,120)or Color3.fromRGB(255,160,200),Thickness=2}).Parent(it)
        
        _7("TextLabel",{Size=UDim2.new(0.7,-5,0.6,0),Position=UDim2.new(0,10,0,5),BackgroundTransparency=1,Text=pl.Name,TextColor3=il and Color3.fromRGB(255,80,80)or Color3.fromRGB(200,70,130),TextSize=13,Font=Enum.Font.GothamBold,TextXAlignment=Enum.TextXAlignment.Left,Parent=it})
        _7("TextLabel",{Size=UDim2.new(0.3,-5,0.4,0),Position=UDim2.new(0.7,5,0.6,5),BackgroundTransparency=1,Text=il and dn or"Not added",TextColor3=il and Color3.fromRGB(255,80,80)or Color3.fromRGB(150,150,150),TextSize=10,Font=Enum.Font.Gotham,TextXAlignment=Enum.TextXAlignment.Right,Parent=it})
        
        it.MouseButton1Click:Connect(function()
            tl[pl.Name]=not il 
            for _,c in ipairs(ps:GetChildren())do 
                if c:IsA("TextButton")then 
                    c:Destroy()
                end 
            end 
            for _,pl in ipairs(_1:GetPlayers())do 
                if pl~=_6 then 
                    CPI(pl)
                end 
            end 
            local ct=0 
            for _,il in pairs(tl)do 
                if il then 
                    ct=ct+1 
                end 
            end 
            cl.Text="Count: "..ct 
        end)
    end
    
    local function UPL()
        for _,c in ipairs(ps:GetChildren())do 
            if c:IsA("TextButton")and c.Name:find("PlayerItem_")then 
                c:Destroy()
            end 
        end 
        for _,pl in ipairs(_1:GetPlayers())do 
            if pl~=_6 then 
                CPI(pl)
            end 
        end 
        local ct=0 
        for _,il in pairs(tl)do 
            if il then 
                ct=ct+1 
            end 
        end 
        cl.Text="Count: "..ct 
    end
    
    cb.MouseButton1Click:Connect(function()
        o:Destroy()
        local lb=bc:FindFirstChild("KillContainer"):FindFirstChild(dn.."Button")
        if lb then 
            lb:FindFirstChild("StatusIndicator").BackgroundColor3=Color3.fromRGB(220,150,180)
        end 
    end)
    
    local id=false 
    ot.InputBegan:Connect(function(i)
        if i.UserInputType==Enum.UserInputType.MouseButton1 then 
            id=true 
            local ds=i.Position 
            local sp=Vector2.new(o.Position.X.Offset,o.Position.Y.Offset)
            i.Changed:Connect(function()
                if i.UserInputState==Enum.UserInputState.End then 
                    id=false 
                end 
            end)
            game:GetService("UserInputService").InputChanged:Connect(function(i)
                if id and i.UserInputType==Enum.UserInputType.MouseMovement then 
                    local d=i.Position-ds 
                    o.Position=UDim2.new(0,sp.X+d.X,0,sp.Y+d.Y)
                end 
            end)
        end 
    end)
    
    UPL()
    _1.PlayerAdded:Connect(UPL)
    _1.PlayerRemoving:Connect(UPL)
end

local function _47()
    if _5:FindFirstChild("PermanentBlacklistOverlay") then 
        _5:FindFirstChild("PermanentBlacklistOverlay"):Destroy()
    end 
    
    local o=_7("Frame",{
        Name="PermanentBlacklistOverlay",
        Size=UDim2.new(0,380,0,400),
        Position=m.Position,
        BackgroundColor3=m.BackgroundColor3,
        BorderSizePixel=0,
        Parent=_5
    })
    
    _7("UIGradient",{Rotation=90,Color=ColorSequence.new({ColorSequenceKeypoint.new(0,Color3.fromRGB(255,250,255)),ColorSequenceKeypoint.new(0.3,Color3.fromRGB(255,235,245)),ColorSequenceKeypoint.new(0.7,Color3.fromRGB(255,220,235)),ColorSequenceKeypoint.new(1,Color3.fromRGB(255,210,225))}),Parent=o})
    _7("UICorner",{CornerRadius=UDim.new(0,16)}).Parent=o 
    _7("UIStroke",{Color=Color3.fromRGB(255,160,200),Thickness=3}).Parent=o
    
    local ot=_7("TextButton",{
        Size=UDim2.new(1,0,0,35),
        BackgroundColor3=Color3.fromRGB(255,225,235),
        Text="",
        AutoButtonColor=false,
        Parent=o
    })
    _7("UICorner",{CornerRadius=UDim.new(0,16,0,0)}).Parent(ot)
    
    _7("TextLabel",{
        Size=UDim2.new(0.7,0,1,0),
        Position=UDim2.new(0,10,0,0),
        BackgroundTransparency=1,
        Text="Permanent Blacklist",
        TextColor3=Color3.fromRGB(200,70,130),
        TextSize=14,
        Font=Enum.Font.GothamBold,
        TextXAlignment=Enum.TextXAlignment.Left,
        Parent=ot
    })
    
    local cl=_7("TextLabel",{
        Size=UDim2.new(0.3,0,1,0),
        Position=UDim2.new(0.7,-10,0,0),
        BackgroundTransparency=1,
        Text="Count: "..(function()
            local count=0
            for _,enabled in pairs(_17)do 
                if enabled then count=count+1 end 
            end
            return count
        end)(),
        TextColor3=Color3.fromRGB(180,100,150),
        TextSize=12,
        Font=Enum.Font.GothamBold,
        TextXAlignment=Enum.TextXAlignment.Right,
        Parent=ot
    })
    
    local inputContainer = _7("Frame",{
        Size=UDim2.new(1,-20,0,40),
        Position=UDim2.new(0,10,0,40),
        BackgroundTransparency=1,
        Parent=o
    })
    
    local usernameInput = _7("TextBox",{
        Size=UDim2.new(0.7,0,1,0),
        BackgroundColor3=Color3.fromRGB(255,235,245),
        TextColor3=Color3.fromRGB(200,70,130),
        PlaceholderColor3=Color3.fromRGB(180,120,160),
        PlaceholderText="Enter username...",
        TextSize=12,
        Font=Enum.Font.Gotham,
        Text="",
        Parent=inputContainer
    })
    _7("UICorner",{CornerRadius=UDim.new(0,6)}).Parent(usernameInput)
    _7("UIStroke",{Color=Color3.fromRGB(255,160,200),Thickness=2}).Parent(usernameInput)
    
    local addButton = _7("TextButton",{
        Size=UDim2.new(0.3,-5,1,0),
        Position=UDim2.new(0.7,5,0,0),
        BackgroundColor3=Color3.fromRGB(255,180,180),
        Text="Add",
        TextColor3=Color3.fromRGB(180,60,60),
        TextSize=12,
        Font=Enum.Font.GothamBold,
        AutoButtonColor=false,
        Parent=inputContainer
    })
    _7("UICorner",{CornerRadius=UDim.new(0,6)}).Parent(addButton)
    
    addButton.MouseButton1Click:Connect(function()
        local username = usernameInput.Text:gsub("%s+", "")
        if username and username ~= "" then
            if not _17[username] then
                _17[username] = true
                usernameInput.Text = ""
                _39()
                cl.Text = "Count: "..(function()
                    local count=0
                    for _,enabled in pairs(_17)do 
                        if enabled then count=count+1 end 
                    end
                    return count
                end)()
                
                local target = _1:FindFirstChild(username)
                if target and target ~= _6 then
                    _41()
                end
                
                for _,c in ipairs(ps:GetChildren())do 
                    if c:IsA("TextButton")then 
                        c:Destroy()
                    end 
                end 
            end
        end
    end)
    
    addButton.MouseEnter:Connect(function()
        addButton.BackgroundColor3 = Color3.fromRGB(255,200,200)
    end)
    
    addButton.MouseLeave:Connect(function()
        addButton.BackgroundColor3 = Color3.fromRGB(255,180,180)
    end)
    
    usernameInput.Focused:Connect(function()
        usernameInput.BackgroundColor3 = Color3.fromRGB(255,245,250)
    end)
    
    usernameInput.FocusLost:Connect(function()
        usernameInput.BackgroundColor3 = Color3.fromRGB(255,235,245)
    end)
    
    local cb=_7("TextButton",{
        Size=UDim2.new(0,28,0,28),
        Position=UDim2.new(1,-35,0.5,-14),
        AnchorPoint=Vector2.new(0,0.5),
        BackgroundColor3=Color3.fromRGB(255,200,220),
        Text="✕",
        TextColor3=Color3.fromRGB(180,60,120),
        TextSize=16,
        Font=Enum.Font.GothamBold,
        AutoButtonColor=false,
        Parent=ot
    })
    _7("UICorner",{CornerRadius=UDim.new(0,6)}).Parent(cb)
    
    local ps=_7("ScrollingFrame",{
        Size=UDim2.new(1,-20,1,-90),
        Position=UDim2.new(0,10,0,85),
        BackgroundTransparency=1,
        ScrollBarThickness=4,
        ScrollBarImageColor3=Color3.fromRGB(255,160,200),
        CanvasSize=UDim2.new(0,0,0,0),
        Parent=o
    })
    local pl=_7("UIListLayout",{Padding=UDim.new(0,6),SortOrder=Enum.SortOrder.LayoutOrder,Parent=ps})
    pl:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()ps.CanvasSize=UDim2.new(0,0,0,pl.AbsoluteContentSize.Y)end)
    
    cb.MouseButton1Click:Connect(function()
        o:Destroy()
        local pbButton=bc:FindFirstChild("KillContainer"):FindFirstChild("PermanentBlacklistButton")
        if pbButton then 
            pbButton:FindFirstChild("StatusIndicator").BackgroundColor3=Color3.fromRGB(220,150,180)
        end 
    end)
    
    local id=false 
    ot.InputBegan:Connect(function(i)
        if i.UserInputType==Enum.UserInputType.MouseButton1 then 
            id=true 
            local ds=i.Position 
            local sp=Vector2.new(o.Position.X.Offset,o.Position.Y.Offset)
            i.Changed:Connect(function()
                if i.UserInputState==Enum.UserInputState.End then 
                    id=false 
                end 
            end)
            game:GetService("UserInputService").InputChanged:Connect(function(i)
                if id and i.UserInputType==Enum.UserInputType.MouseMovement then 
                    local d=i.Position-ds 
                    o.Position=UDim2.new(0,sp.X+d.X,0,sp.Y+d.Y)
                end 
            end)
        end 
    end)
end

C("Kill","ProteinEgg","Equip fist+protein egg on respawn",function(s)
    _28 = s
    if s then
        print("Protein egg function enabled (only equip, not use)")
        
        if _29 then
            _29:Disconnect()
            _29 = nil
        end
        
        _29 = _2.Heartbeat:Connect(function()
            if _28 then
                local character = _6.Character
                if character then
                    local humanoid = character:FindFirstChild("Humanoid")
                    if humanoid then
                        if humanoid.Health <= 0 then
                            _30 = tick()
                        end
                        
                        if humanoid.Health > 0 and _30 > 0 then
                            local currentTime = tick()
                            if currentTime - _30 < 3 then
                                _43()
                                _30 = 0
                            end
                        end
                    end
                end
            end
        end)
        
        task.spawn(function()
            task.wait(1)
            _43()
        end)
    else
        _28 = false
        if _29 then
            _29:Disconnect()
            _29 = nil
        end
        print("Protein egg function disabled")
    end
end)

C("Kill","AutoFight","Auto equip + punch",function(s)
    _11 = s 
    if s then 
        task.spawn(function()
            while _11 do 
                local c = _6.Character 
                if not c then 
                    _6.CharacterAdded:Wait()
                    c = _6.Character 
                    task.wait(1)
                end 
                if c then 
                    local h = c:FindFirstChild("Humanoid")
                    if h then 
                        if h.Health <= 0 then 
                            task.wait(3)
                            c = _6.Character 
                            if not c then 
                                _6.CharacterAdded:Wait()
                                c = _6.Character 
                                task.wait(1)
                            end 
                        else 
                            local bp = _6:FindFirstChild("Backpack")
                            if bp then 
                                for _, t in pairs(bp:GetChildren()) do 
                                    if t:IsA("Tool") then 
                                        local n = string.lower(t.Name)
                                        if n:find("punch") or n:find("fist") then 
                                            h:EquipTool(t)
                                            break 
                                        end 
                                    end 
                                end 
                            end 
                            local me = _6:FindFirstChild("muscleEvent")
                            if me then 
                                me:FireServer("punch","leftHand")
                            end 
                        end 
                    end 
                end 
                task.wait(0.2)
            end 
        end)
    end 
end)

C("Kill","RangeKill","Range: ".._18,function(s)
    _13 = s 
    if s then 
        task.spawn(function()
            while _13 do 
                local c = _6.Character 
                if c then 
                    local h = c:FindFirstChild("Humanoid")
                    local rp = c:FindFirstChild("HumanoidRootPart")
                    if h and h.Health > 0 and rp then 
                        local pos = rp.Position
                        for _, op in ipairs(_1:GetPlayers()) do 
                            if op ~= _6 and not _9[op.Name] then 
                                local oc = op.Character 
                                if oc then 
                                    local oh = oc:FindFirstChild("Humanoid")
                                    local orp = oc:FindFirstChild("HumanoidRootPart")
                                    if oh and oh.Health > 0 and orp then 
                                        local distance = (pos - orp.Position).Magnitude
                                        if distance <= _18 then 
                                            _38(op)
                                        end 
                                    end 
                                end 
                            end 
                        end 
                    end 
                end 
                task.wait(0.1)
            end 
        end)
    end 
end)

C("Kill","AutoKill","Prioritize blacklist, else all map",function(s)
    _10 = s 
    if s then 
        task.spawn(function()
            while _10 do 
                local hasPermanentBlacklisted = false
                for n, enabled in pairs(_17) do
                    if enabled then
                        local tp = _1:FindFirstChild(n)
                        if tp and not _9[tp.Name] then
                            hasPermanentBlacklisted = true
                            _38(tp)
                        end
                    end
                end
                
                if not hasPermanentBlacklisted then
                    local hasBlacklisted=false
                    for _,b in pairs(_8)do 
                        if b then 
                            hasBlacklisted=true
                            break 
                        end 
                    end
                    
                    if hasBlacklisted then
                        for n,b in pairs(_8)do 
                            if b and not _9[n]then 
                                local tp=_1:FindFirstChild(n)
                                if tp then 
                                    _38(tp)
                                end 
                            end 
                        end 
                    else
                        for _,op in ipairs(_1:GetPlayers())do 
                            if op~=_6 and not _9[op.Name]then 
                                _38(op)
                            end 
                        end 
                    end 
                end
                task.wait(0.1)
            end 
        end)
    end 
end)

C("Kill","Blacklist","Prioritize attack",function(s)
    if s then 
        PLW("Blacklist","b")
    else 
        local eo=_5:FindFirstChild("BlacklistOverlay")
        if eo then 
            eo:Destroy()
        end 
    end 
end)

C("Kill","Whitelist","Protect players",function(s)
    if s then 
        PLW("Whitelist","w")
    else 
        local eo=_5:FindFirstChild("WhitelistOverlay")
        if eo then 
            eo:Destroy()
        end 
    end 
end)

C("Kill","PermanentBlacklist","Auto enable kill when encountered",function(s)
    if s then 
        _47()
    else 
        local eo=_5:FindFirstChild("PermanentBlacklistOverlay")
        if eo then 
            eo:Destroy()
        end 
    end 
end)

C("Optim","BlackWorkspace","Lowest graphics + black effect",function(s)
    _46(s)
end)

C("Optim","GraphicsOptimization","Min visibility + effects",function(s)
    if s then
        _44()
        print("Graphics optimized to lowest settings")
    else
        _45()
        print("Graphics restored")
    end
end)

C("Assistan","HealthZero","Continuously set health to 0",function(s)
    _33 = s
    if s then
        if _34 then
            _34:Disconnect()
        end
        
        _34 = _2.Heartbeat:Connect(function()
            local character = _6.Character
            if character then
                local humanoid = character:FindFirstChild("Humanoid")
                if humanoid and humanoid.Health > 0 then
                    pcall(function()
                        humanoid.Health = 0
                    end)
                end
            end
        end)
    else
        if _34 then
            _34:Disconnect()
            _34 = nil
        end
    end
end)

C("Assistan","PositionLock","Continuously teleport to current position",function(s)
    _35 = s
    if s then
        task.spawn(function()
            local c = _6.Character
            if c then
                local root = c:FindFirstChild("HumanoidRootPart")
                if root then
                    _21 = root.Position
                    
                    if _22 then
                        _22:Disconnect()
                    end
                    
                    _22 = _2.Heartbeat:Connect(function()
                        local currentChar = _6.Character
                        if currentChar then
                            local currentRoot = currentChar:FindFirstChild("HumanoidRootPart")
                            if currentRoot then
                                currentRoot.CFrame = CFrame.new(_21)
                                currentRoot.Velocity = Vector3.new(0, 0, 0)
                                currentRoot.RotVelocity = Vector3.new(0, 0, 0)
                            end
                        end
                    end)
                end
            end
        end)
    else
        if _22 then
            _22:Disconnect()
            _22 = nil
        end
        _21 = nil
    end
end)

tb.InputBegan:Connect(function(i)
    if i.UserInputType==Enum.UserInputType.MouseButton1 then 
        id=true 
        local ds=i.Position 
        local sp=Vector2.new(m.Position.X.Offset,m.Position.Y.Offset)
        i.Changed:Connect(function()
            if i.UserInputState==Enum.UserInputState.End then 
                id=false 
            end 
        end)
        game:GetService("UserInputService").InputChanged:Connect(function(i)
            if id and i.UserInputType==Enum.UserInputType.MouseMovement then 
                local d=i.Position-ds 
                m.Position=UDim2.new(0,sp.X+d.X,0,sp.Y+d.Y)
            end 
        end)
    end 
end)
