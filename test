-- ==================== é˜²å¤šå¼€æ£€æŸ¥ ====================
local function AntiMultiOpen()
    local existingGui = game:GetService("CoreGui"):FindFirstChild("KJY_Team_AntiDup")
    if existingGui then
        game:GetService("Players").LocalPlayer:Kick("Script already running! Please wait.")
        return false
    end
    
    local antiDupGui = Instance.new("ScreenGui")
    antiDupGui.Name = "KJY_Team_AntiDup"
    antiDupGui.Parent = game:GetService("CoreGui")
    
    game:GetService("Players").PlayerRemoving:Connect(function(player)
        if player == game:GetService("Players").LocalPlayer then
            antiDupGui:Destroy()
        end
    end)
    
    return true
end

if not AntiMultiOpen() then
    return
end

-- ==================== ç™½åå•éªŒè¯ ====================
local player = game:GetService("Players").LocalPlayer
local function checkWhitelist()
    local playerName = player.Name
    local success, isWhitelisted = pcall(function()
        local list = game:HttpGet("https://raw.githubusercontent.com/qiaoxxyxx/Roblox/refs/heads/main/whitelist.txt")
        local whitelist = {}
        for name in list:gmatch("[^,]+") do whitelist[name:gsub("%s+","")] = true end
        return whitelist[playerName]
    end)
    
    if not success or not isWhitelisted then
        player:Kick("æœªæˆæƒç”¨æˆ·")
        return false
    end
    return true
end

if not checkWhitelist() then return end

-- ==================== é˜²æŒ‚æœº ====================
player.Idled:Connect(function()
    game:GetService("VirtualUser"):Button2Down(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
    wait(1)
    game:GetService("VirtualUser"):Button2Up(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
end)

-- ==================== åˆ›å»ºç²‰ç™½è‰²æ¸å˜UI ====================
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "PinkWhiteUI"
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
screenGui.Parent = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")

-- ä¸»çª—å£
local mainWindow = Instance.new("Frame")
mainWindow.Name = "MainWindow"
mainWindow.Size = UDim2.new(0, 320, 0, 200)
mainWindow.Position = UDim2.new(0, 10, 0, 50)
mainWindow.BackgroundColor3 = Color3.fromRGB(255, 240, 245)
mainWindow.BorderSizePixel = 0
mainWindow.ZIndex = 10
mainWindow.Parent = screenGui

-- ç²‰è‰²æ¸å˜èƒŒæ™¯
local backgroundGradient = Instance.new("UIGradient")
backgroundGradient.Rotation = 90
backgroundGradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 245, 250)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(255, 230, 240)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(255, 220, 230))
})
backgroundGradient.Parent = mainWindow

-- åœ†è§’
local uiCorner = Instance.new("UICorner")
uiCorner.CornerRadius = UDim.new(0, 12)
uiCorner.Parent = mainWindow

-- è¾¹æ¡†
local uiStroke = Instance.new("UIStroke")
uiStroke.Color = Color3.fromRGB(255, 180, 210)
uiStroke.Thickness = 2
uiStroke.Parent = mainWindow

-- æ ‡é¢˜æ ï¼ˆå¯æ‹–æ‹½åŒºåŸŸï¼‰
local titleBar = Instance.new("TextButton")
titleBar.Name = "TitleBar"
titleBar.Size = UDim2.new(1, 0, 0, 35)
titleBar.BackgroundColor3 = Color3.fromRGB(255, 230, 240)
titleBar.Text = ""
titleBar.AutoButtonColor = false
titleBar.ZIndex = 11
titleBar.Parent = mainWindow

local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 12, 0, 0)
titleCorner.Parent = titleBar

local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1, -80, 1, 0)
titleLabel.Position = UDim2.new(0, 12, 0, 0)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "ğŸŒ¸ æé€Ÿé”»ç‚¼"
titleLabel.TextColor3 = Color3.fromRGB(200, 80, 140)
titleLabel.TextSize = 16
titleLabel.Font = Enum.Font.GothamBold
titleLabel.TextXAlignment = Enum.TextXAlignment.Left
titleLabel.ZIndex = 12
titleLabel.Parent = titleBar

-- æœ€å°åŒ–æŒ‰é’®
local minimizeButton = Instance.new("TextButton")
minimizeButton.Name = "MinimizeButton"
minimizeButton.Size = UDim2.new(0, 26, 0, 26)
minimizeButton.Position = UDim2.new(1, -60, 0.5, -13)
minimizeButton.AnchorPoint = Vector2.new(0.5, 0.5)
minimizeButton.BackgroundColor3 = Color3.fromRGB(255, 210, 225)
minimizeButton.Text = "â”€"
minimizeButton.TextColor3 = Color3.fromRGB(180, 60, 120)
minimizeButton.TextSize = 18
minimizeButton.Font = Enum.Font.GothamBold
minimizeButton.AutoButtonColor = false
minimizeButton.ZIndex = 12
minimizeButton.Parent = titleBar

local minimizeCorner = Instance.new("UICorner")
minimizeCorner.CornerRadius = UDim.new(0, 6)
minimizeCorner.Parent = minimizeButton

-- å…³é—­æŒ‰é’®
local closeButton = Instance.new("TextButton")
closeButton.Name = "CloseButton"
closeButton.Size = UDim2.new(0, 26, 0, 26)
closeButton.Position = UDim2.new(1, -28, 0.5, -13)
closeButton.AnchorPoint = Vector2.new(0.5, 0.5)
closeButton.BackgroundColor3 = Color3.fromRGB(255, 210, 225)
closeButton.Text = "âœ•"
closeButton.TextColor3 = Color3.fromRGB(180, 60, 120)
closeButton.TextSize = 16
closeButton.Font = Enum.Font.GothamBold
closeButton.AutoButtonColor = false
closeButton.ZIndex = 12
closeButton.Parent = titleBar

local closeCorner = Instance.new("UICorner")
closeCorner.CornerRadius = UDim.new(0, 6)
closeCorner.Parent = closeButton

-- å†…å®¹åŒºåŸŸ
local contentFrame = Instance.new("Frame")
contentFrame.Name = "Content"
contentFrame.Size = UDim2.new(1, -20, 1, -45)
contentFrame.Position = UDim2.new(0, 10, 0, 40)
contentFrame.BackgroundTransparency = 1
contentFrame.ZIndex = 11
contentFrame.Parent = mainWindow

-- UIçŠ¶æ€å˜é‡
local isMinimized = false
local originalHeight = 200
local originalSize = mainWindow.Size
local isDragging = false
local dragStart, windowStart = Vector2.new(0, 0), Vector2.new(0, 0)

-- ==================== æ‹–æ‹½åŠŸèƒ½ ====================
titleBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        isDragging = true
        dragStart = input.Position
        windowStart = Vector2.new(mainWindow.Position.X.Offset, mainWindow.Position.Y.Offset)
        mainWindow.ZIndex = 20
    end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
    if isDragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        mainWindow.Position = UDim2.new(0, windowStart.X + delta.X, 0, windowStart.Y + delta.Y)
    end
end)

game:GetService("UserInputService").InputEnded:Connect(function(input)
    if isDragging and input.UserInputType == Enum.UserInputType.MouseButton1 then
        isDragging = false
        mainWindow.ZIndex = 10
    end
end)

-- ==================== æœ€å°åŒ–åŠŸèƒ½ ====================
minimizeButton.MouseButton1Click:Connect(function()
    isMinimized = not isMinimized
    
    if isMinimized then
        mainWindow.Size = UDim2.new(0, 320, 0, 35)
        contentFrame.Visible = false
        minimizeButton.Text = "+"
        titleCorner.CornerRadius = UDim.new(0, 12)
    else
        mainWindow.Size = originalSize
        contentFrame.Visible = true
        minimizeButton.Text = "â”€"
        titleCorner.CornerRadius = UDim.new(0, 12, 0, 0)
    end
end)

-- æŒ‰é’®æ‚¬åœæ•ˆæœ
minimizeButton.MouseEnter:Connect(function()
    minimizeButton.BackgroundColor3 = Color3.fromRGB(255, 190, 215)
end)

minimizeButton.MouseLeave:Connect(function()
    minimizeButton.BackgroundColor3 = Color3.fromRGB(255, 210, 225)
end)

minimizeButton.MouseButton1Down:Connect(function()
    minimizeButton.BackgroundColor3 = Color3.fromRGB(255, 170, 200)
end)

minimizeButton.MouseButton1Up:Connect(function()
    minimizeButton.BackgroundColor3 = Color3.fromRGB(255, 190, 215)
end)

-- ==================== å…³é—­åŠŸèƒ½ ====================
closeButton.MouseButton1Click:Connect(function()
    screenGui:Destroy()
    game:GetService("CoreGui"):FindFirstChild("KJY_Team_AntiDup"):Destroy()
end)

closeButton.MouseEnter:Connect(function()
    closeButton.BackgroundColor3 = Color3.fromRGB(255, 190, 215)
    closeButton.TextColor3 = Color3.fromRGB(200, 40, 100)
end)

closeButton.MouseLeave:Connect(function()
    closeButton.BackgroundColor3 = Color3.fromRGB(255, 210, 225)
    closeButton.TextColor3 = Color3.fromRGB(180, 60, 120)
end)

closeButton.MouseButton1Down:Connect(function()
    closeButton.BackgroundColor3 = Color3.fromRGB(255, 170, 200)
end)

closeButton.MouseButton1Up:Connect(function()
    closeButton.BackgroundColor3 = Color3.fromRGB(255, 190, 215)
end)

-- ==================== åˆ›å»ºåŠŸèƒ½æŒ‰é’® ====================
-- åˆ›å»ºæŒ‰é’®æ ·å¼å‡½æ•°
local function createPinkButton(name, desc, callback)
    local buttonFrame = Instance.new("Frame")
    buttonFrame.Name = name .. "Button"
    buttonFrame.Size = UDim2.new(1, 0, 0, 45)
    buttonFrame.Position = UDim2.new(0, 0, 0, #contentFrame:GetChildren() * 50)
    buttonFrame.BackgroundColor3 = Color3.fromRGB(255, 235, 245)
    buttonFrame.BorderSizePixel = 0
    buttonFrame.ZIndex = 12
    buttonFrame.Parent = contentFrame
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 8)
    buttonCorner.Parent = buttonFrame
    
    local buttonStroke = Instance.new("UIStroke")
    buttonStroke.Color = Color3.fromRGB(255, 180, 210)
    buttonStroke.Thickness = 1
    buttonStroke.Parent = buttonFrame
    
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(1, 0, 1, 0)
    button.BackgroundTransparency = 1
    button.Text = ""
    button.AutoButtonColor = false
    button.ZIndex = 13
    button.Parent = buttonFrame
    
    local buttonTitle = Instance.new("TextLabel")
    buttonTitle.Size = UDim2.new(1, -10, 0.6, 0)
    buttonTitle.Position = UDim2.new(0, 10, 0, 5)
    buttonTitle.BackgroundTransparency = 1
    buttonTitle.Text = name
    buttonTitle.TextColor3 = Color3.fromRGB(180, 60, 120)
    buttonTitle.TextSize = 14
    buttonTitle.Font = Enum.Font.GothamBold
    buttonTitle.TextXAlignment = Enum.TextXAlignment.Left
    buttonTitle.ZIndex = 14
    buttonTitle.Parent = buttonFrame
    
    local buttonDesc = Instance.new("TextLabel")
    buttonDesc.Size = UDim2.new(1, -10, 0.4, 0)
    buttonDesc.Position = UDim2.new(0, 10, 0.6, 0)
    buttonDesc.BackgroundTransparency = 1
    buttonDesc.Text = desc
    buttonDesc.TextColor3 = Color3.fromRGB(150, 90, 120)
    buttonDesc.TextSize = 11
    buttonDesc.Font = Enum.Font.Gotham
    buttonDesc.TextXAlignment = Enum.TextXAlignment.Left
    buttonDesc.ZIndex = 14
    buttonDesc.Parent = buttonFrame
    
    -- å¼€å…³æŒ‡ç¤ºå™¨ï¼ˆå¦‚æœæ˜¯å¼€å…³åŠŸèƒ½ï¼‰
    if callback == "toggle" then
        local indicator = Instance.new("Frame")
        indicator.Name = "Indicator"
        indicator.Size = UDim2.new(0, 12, 0, 12)
        indicator.Position = UDim2.new(1, -25, 0.5, -6)
        indicator.AnchorPoint = Vector2.new(0.5, 0.5)
        indicator.BackgroundColor3 = Color3.fromRGB(220, 150, 180)
        indicator.BorderSizePixel = 0
        indicator.ZIndex = 14
        indicator.Parent = buttonFrame
        
        local indicatorCorner = Instance.new("UICorner")
        indicatorCorner.CornerRadius = UDim.new(1, 0)
        indicatorCorner.Parent = indicator
    end
    
    -- æŒ‰é’®äº¤äº’æ•ˆæœ
    button.MouseEnter:Connect(function()
        buttonFrame.BackgroundColor3 = Color3.fromRGB(255, 225, 235)
        buttonStroke.Color = Color3.fromRGB(255, 160, 195)
    end)
    
    button.MouseLeave:Connect(function()
        buttonFrame.BackgroundColor3 = Color3.fromRGB(255, 235, 245)
        buttonStroke.Color = Color3.fromRGB(255, 180, 210)
    end)
    
    button.MouseButton1Down:Connect(function()
        buttonFrame.BackgroundColor3 = Color3.fromRGB(255, 215, 230)
    end)
    
    button.MouseButton1Up:Connect(function()
        buttonFrame.BackgroundColor3 = Color3.fromRGB(255, 225, 235)
        if type(callback) == "function" then
            callback()
        elseif callback == "toggle" then
            -- å¼€å…³åŠŸèƒ½å¤„ç†
            local indicator = buttonFrame:FindFirstChild("Indicator")
            if indicator then
                if indicator.BackgroundColor3 == Color3.fromRGB(220, 150, 180) then
                    indicator.BackgroundColor3 = Color3.fromRGB(120, 220, 150)
                else
                    indicator.BackgroundColor3 = Color3.fromRGB(220, 150, 180)
                end
            end
        end
    end)
    
    return buttonFrame
end

-- ==================== æ ¸å¿ƒåŠŸèƒ½ ====================
local spamTraining = false
local batchSize = 20
local autoProtein = false
local autoShake = false

-- æé€Ÿé”»ç‚¼åŠŸèƒ½
local function spamExerciseEvents()
    while spamTraining do
        pcall(function()
            local muscleEvent = player.muscleEvent
            for i = 0, batchSize do
                muscleEvent:FireServer("rep")
            end
        end)
        task.wait(0.01)
    end
end

-- è‡ªåŠ¨è›‹ç™½è›‹åŠŸèƒ½
local function proteinLoop()
    while autoProtein do
        pcall(function()
            if not player.boostTimersFolder:FindFirstChild("Protein Egg") then
                local egg = player.Backpack:FindFirstChild("Protein Egg")
                if egg then
                    player.Character.Humanoid:EquipTool(egg)
                    task.wait(0.1)
                    if player.Character:FindFirstChild("Protein Egg") then
                        player.muscleEvent:FireServer("proteinEgg", player.Character:FindFirstChild("Protein Egg"))
                        player.Character.Humanoid:UnequipTools()
                    end
                end
            end
        end)
        task.wait(0.2)
    end
end

-- è‡ªåŠ¨çƒ­å¸¦å¥¶æ˜”åŠŸèƒ½
local function shakeLoop()
    while autoShake do
        pcall(function()
            local shake = player.Backpack:FindFirstChild("Tropical Shake")
            if shake then
                player.Character.Humanoid:EquipTool(shake)
                task.wait(0.05)
                if player.Character:FindFirstChild("Tropical Shake") then
                    player.muscleEvent:FireServer("tropicalShake", player.Character:FindFirstChild("Tropical Shake"))
                    player.Character.Humanoid:UnequipTools()
                end
            end
        end)
        task.wait(0.1)
    end
end

-- æ¸…é™¤å¢ç›ŠUIåŠŸèƒ½
local function cleanUI()
    local keywords = {"+","Coins","Coin","Strength","Exp","Experience","Level","Damage","Health"}
    local protected = {"WindUI","Crazy Top","Rayfield", "KJY_Team_AntiDup", "PinkWhiteUI"}
    
    local function cleanGui(parent)
        for _, gui in ipairs(parent:GetChildren()) do
            if gui:IsA("ScreenGui") then
                local shouldRemove = true
                for _, name in ipairs(protected) do
                    if gui.Name:find(name) then
                        shouldRemove = false
                        break
                    end
                end
                
                if shouldRemove then
                    for _, element in ipairs(gui:GetDescendants()) do
                        if (element:IsA("TextLabel") or element:IsA("TextButton")) and element.Text then
                            for _, keyword in ipairs(keywords) do
                                if element.Text:find(keyword) then
                                    gui:Destroy()
                                    break
                                end
                            end
                        end
                    end
                end
            end
        end
    end
    
    cleanGui(game:GetService("CoreGui"))
    cleanGui(player:FindFirstChild("PlayerGui"))
end

-- ==================== åˆ›å»ºåŠŸèƒ½æŒ‰é’® ====================
-- æé€Ÿé”»ç‚¼å¼€å…³
local function toggleSpamTraining()
    spamTraining = not spamTraining
    if spamTraining then
        task.spawn(spamExerciseEvents)
        print("é”»ç‚¼å·²å¼€å¯")
    else
        print("é”»ç‚¼å·²å…³é—­")
    end
end

createPinkButton("âš¡ é”»ç‚¼", "å¿«é€Ÿ", function()
    toggleSpamTraining()
end)

-- è‡ªåŠ¨è›‹ç™½è›‹å¼€å…³
local function toggleAutoProtein()
    autoProtein = not autoProtein
    if autoProtein then
        task.spawn(proteinLoop)
        print("è‡ªåŠ¨è›‹ç™½è›‹å·²å¼€å¯")
    else
        print("è‡ªåŠ¨è›‹ç™½è›‹å·²å…³é—­")
    end
end

createPinkButton("ğŸ¥š è‡ªåŠ¨è›‹ç™½è›‹", "è‡ªåŠ¨ä½¿ç”¨è›‹ç™½è›‹å¢ç›Š", function()
    toggleAutoProtein()
end)

-- è‡ªåŠ¨çƒ­å¸¦å¥¶æ˜”å¼€å…³
local function toggleAutoShake()
    autoShake = not autoShake
    if autoShake then
        task.spawn(shakeLoop)
        print("è‡ªåŠ¨çƒ­å¸¦å¥¶æ˜”å·²å¼€å¯")
    else
        print("è‡ªåŠ¨çƒ­å¸¦å¥¶æ˜”å·²å…³é—­")
    end
end

createPinkButton("ğŸ¹ è‡ªåŠ¨çƒ­å¸¦å¥¶æ˜”", "è‡ªåŠ¨ä½¿ç”¨çƒ­å¸¦å¥¶æ˜”", function()
    toggleAutoShake()
end)

-- æ¸…é™¤å¢ç›ŠUIæŒ‰é’®
createPinkButton("ğŸ§¹ æ¸…é™¤å¢ç›ŠUI", "æ¸…é™¤å±å¹•ä¸Šçš„å¢ç›Šæç¤º", function()
    cleanUI()
    print("å¢ç›ŠUIå·²æ¸…é™¤")
end)

-- è°ƒæ•´çª—å£é«˜åº¦
mainWindow.Size = UDim2.new(0, 320, 0, 50 + (#contentFrame:GetChildren() * 50) + 10)
originalSize = mainWindow.Size

print("ğŸŒ¸ ç²‰ç™½è‰²æ¸å˜UIæé€Ÿé”»ç‚¼è„šæœ¬å·²åŠ è½½ï¼")
print("åŠŸèƒ½: æé€Ÿé”»ç‚¼ | è‡ªåŠ¨è›‹ç™½è›‹ | è‡ªåŠ¨å¥¶æ˜” | æ¸…é™¤UI")
print("UIæ”¯æŒ: æ‹–æ‹½ | æœ€å°åŒ– | å…³é—­")
