-- ==================== é˜²å¤šå¼€æ£€æŸ¥ ====================
local function AntiMultiOpen()
    local existingGui = game:GetService("CoreGui"):FindFirstChild("KJY_Team_AntiDup")
    if existingGui then
        game:GetService("Players").LocalPlayer:Kick("Script already running! Please wait.")
        return false
    end
    
    local antiDupGui = Instance.new("ScreenGui")
    antiDupGui.Name = "KJY_Team_AntiDup"
    antiDupGui.Parent = game:GetService("CoreGui")
    
    game:GetService("Players").PlayerRemoving:Connect(function(player)
        if player == game:GetService("Players").LocalPlayer then
            antiDupGui:Destroy()
        end
    end)
    
    return true
end

if not AntiMultiOpen() then
    return
end

-- ==================== ç™½åå•éªŒè¯ ====================
local player = game:GetService("Players").LocalPlayer
local function checkWhitelist()
    local playerName = player.Name
    local success, isWhitelisted = pcall(function()
        local list = game:HttpGet("https://raw.githubusercontent.com/qiaoxxyxx/Roblox/refs/heads/main/whitelist.txt")
        local whitelist = {}
        for name in list:gmatch("[^,]+") do whitelist[name:gsub("%s+","")] = true end
        return whitelist[playerName]
    end)
    
    if not success or not isWhitelisted then
        player:Kick("æœªæˆæƒç”¨æˆ·")
        return false
    end
    return true
end

if not checkWhitelist() then return end

-- ==================== é˜²æŒ‚æœº ====================
player.Idled:Connect(function()
    game:GetService("VirtualUser"):Button2Down(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
    wait(1)
    game:GetService("VirtualUser"):Button2Up(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
end)

-- ==================== ä»GitHubåŠ è½½WindUIæ¡†æ¶ ====================
local success, winduiCode = pcall(function()
    return game:HttpGet("https://raw.githubusercontent.com/qiaoxxyxx/Roblox/refs/heads/main/ui.lua")
end)

if success and winduiCode then
    local winduiFunc, errorMsg = loadstring(winduiCode)
    if winduiFunc then
        pcall(winduiFunc)
        print("âœ… WindUIæ¡†æ¶åŠ è½½å®Œæˆ")
        
        -- ç­‰å¾…WindUIæ¡†æ¶åˆå§‹åŒ–
        wait(0.5)
        
        -- ==================== ä½¿ç”¨åŠ å¯†ä»£ç çš„åŠŸèƒ½éƒ¨åˆ† ====================
        local v={[0x1]="",[0x2]="K",[0x3]="M",[0x4]="B",[0x5]="T",[0x6]="Qa",[0x7]="Qi"}
        local function w(x,y)
            local z=math.floor(math.log(math.max(1,math.abs(x)),1000))
            local A=v[z+1]or("e+"..z)
            local B=math.floor(x*((10^y)/(1000^z)))/(10^y)
            return string.format("%."..y.."f%s",B,A)
        end
        
        local C,D,E,F=0,{},0,0
        local G=20
        local H=6
        
        local function I()
            return pcall(function()
                return player.boostTimersFolder:FindFirstChild("Protein Egg")
            end)
        end
        
        local function J()
            if #D==0 then return 0 end
            local K=0
            for L,M in next,D do K=K+(M or 0) end
            return K/#D
        end
        
        -- ==================== æ·»åŠ åŠŸèƒ½æŒ‰é’®åˆ°WindUI ====================
        if _G.WindUI and _G.WindUI.AddButton then
            -- æé€Ÿé”»ç‚¼æŒ‰é’®1
            _G.V=false
            local function W()
                while _G.V do
                    wait()
                    pcall(function()
                        if tostring(player.equippedPets.pet1.Value)=="Swift Samurai" then
                            for X=0,19 do
                                player.muscleEvent:FireServer("rep")
                            end
                        end
                    end)
                end
            end
            
            _G.WindUI.AddButton("âš¡ Auto Train", "Auto strength training", function()
                _G.V = not _G.V
                if _G.V then
                    W()
                end
            end)
            
            -- æé€Ÿé”»ç‚¼æŒ‰é’®2
            _G.L=false
            local function Z()
                while _G.L do
                    wait()
                    pcall(function()
                        if tostring(player.equippedPets.pet1.Value)=="Swift Samurai" then
                            for a0=0,20 do
                                player.muscleEvent:FireServer("rep")
                            end
                        end
                    end)
                end
            end
            
            _G.WindUI.AddButton("âš¡ Auto Train 2", "Auto strength training 2", function()
                _G.L = not _G.L
                if _G.L then
                    Z()
                end
            end)
            
            -- è‡ªåŠ¨è›‹ç™½è›‹
            _G.Z=false
            local function _()
                while _G.Z do
                    wait(0.2)
                    pcall(function()
                        if not player.boostTimersFolder:FindFirstChild("Protein Egg") then
                            local a0=player.Backpack:FindFirstChild("Protein Egg")
                            if a0 then
                                player.Character.Humanoid:EquipTool(a0)
                                wait(0.1)
                                if player.Character:FindFirstChild("Protein Egg") then
                                    player.muscleEvent:FireServer("proteinEgg", player.Character:FindFirstChild("Protein Egg"))
                                    wait(0.1)
                                    player.Character.Humanoid:UnequipTools()
                                end
                            end
                        end
                    end)
                end
            end
            
            _G.WindUI.AddButton("ğŸ¥š Auto Egg", "Auto use Protein Egg", function()
                _G.Z = not _G.Z
                if _G.Z then
                    _()
                end
            end)
            
            -- è‡ªåŠ¨å¥¶æ˜”
            _G.W=false
            local function a2()
                while _G.W do
                    wait(0.1)
                    pcall(function()
                        local a3=player.Backpack:FindFirstChild("Tropical Shake")
                        if a3 then
                            player.Character.Humanoid:EquipTool(a3)
                            wait(0.05)
                            if player.Character:FindFirstChild("Tropical Shake") then
                                player.muscleEvent:FireServer("tropicalShake", player.Character:FindFirstChild("Tropical Shake"))
                                wait(0.05)
                                player.Character.Humanoid:UnequipTools()
                            end
                        end
                    end)
                end
            end
            
            _G.WindUI.AddButton("ğŸ¹ Auto Shake", "Auto use Tropical Shake", function()
                _G.W = not _G.W
                if _G.W then
                    a2()
                end
            end)
            
            -- æ¸…é™¤UI
            local function a5()
                local a6=game:GetService("CoreGui")
                local a7=player:FindFirstChild("PlayerGui")
                local a8={"+","Coins","Coin","Strength","Exp","Experience","Level","Damage","Health"}
                local a9={"WindUI","Crazy Top","Rayfield","KJY_Team_AntiDup"}
                
                for aa,ab in ipairs(a6:GetChildren()) do
                    if ab:IsA("ScreenGui") then
                        local ac=false
                        for ad,ae in ipairs(a9) do 
                            if ab.Name:find(ae) then 
                                ac=true
                                break 
                            end
                        end
                        if ac then continue end
                        
                        local af=false
                        for ag,ah in ipairs(ab:GetDescendants()) do
                            if (ah:IsA("TextLabel") or ah:IsA("TextButton")) and ah.Text then
                                local ai=ah.Text
                                for aj,ak in ipairs(a8) do 
                                    if ai:find(ak) or ai:find("%+%d+") then 
                                        af=true
                                        break 
                                    end
                                end
                                if af then break end
                            end
                        end
                        if af then ab:Destroy() end
                    end
                end
                
                if a7 then
                    for aa,ab in ipairs(a7:GetChildren()) do
                        if ab:IsA("ScreenGui") then
                            local ac=false
                            for ad,ae in ipairs(a9) do 
                                if ab.Name:find(ae) then 
                                    ac=true
                                    break 
                                end
                            end
                            if ac then continue end
                            
                            local af=false
                            for ag,ah in ipairs(ab:GetDescendants()) do
                                if (ah:IsA("TextLabel") or ah:IsA("TextButton")) and ah.Text then
                                    local ai=ah.Text
                                    for aj,ak in ipairs(a8) do 
                                        if ai:find(ak) or ai:find("%+%d+") then 
                                            af=true
                                            break 
                                        end
                                    end
                                    if af then break end
                                end
                            end
                            if af then ab:Destroy() end
                        end
                    end
                end
            end
            
            _G.WindUI.AddButton("ğŸ§¹ Clear UI", "Remove all gain notifications", a5)
        else
            warn("âŒ WindUI APIæœªæ‰¾åˆ°")
        end
        
        -- ==================== ç»Ÿè®¡æ•°æ®æ›´æ–° ====================
        spawn(function()
            while wait(1) do
                pcall(function()
                    local Q = player.leaderstats.Strength.Value
                    local R = tick()
                    
                    if C > 0 then
                        local S = (Q - C) / (R - E)
                        if R - F >= G then
                            table.insert(D, S)
                            if #D > H then
                                table.remove(D, 1)
                            end
                            F = R
                        end
                    end
                    
                    C = Q
                    E = R
                    local T = J()
                    local U = I()
                    
                    -- æ›´æ–°WindUIæ•°æ®
                    if _G.WindUI and _G.WindUI.UpdateStats and _G.WindUI.UpdateTitle then
                        _G.WindUI.UpdateTitle("strength " .. w(Q, 1))
                        _G.WindUI.UpdateStats({
                            current_strength = w(Q, 1),
                            current_speed = string.format("%.1f/s", T > 0 and T or 0),
                            avg_speed_20s = string.format("%.1f/s", #D > 0 and T or 0),
                            daily_gain = w(T * 86400, 1),
                            monthly_gain = w(T * 2592000, 1),
                            protein_status = U and "on" or "off"
                        })
                    end
                end)
            end
        end)
        
        print("âœ… Cr4zy Strength Pro åŠ è½½å®Œæˆï¼")
        
    else
        warn("âŒ WindUIä»£ç åŠ è½½å¤±è´¥: " .. tostring(errorMsg))
        player:Kick("WindUIåŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥")
    end
else
    warn("âŒ æ— æ³•ä»GitHubåŠ è½½WindUIä»£ç ")
    player:Kick("æ— æ³•åŠ è½½ç•Œé¢æ–‡ä»¶")
end
