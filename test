-- Èò≤Â§öÂºÄÂäüËÉΩ
local function AntiMultiOpen()
    local existingGui = game:GetService("CoreGui"):FindFirstChild("KJY_Team_AntiDup")
    if existingGui then
        game:GetService("Players").LocalPlayer:Kick("Script already running! Please wait.")
        return false
    end
    local antiDupGui = Instance.new("ScreenGui")
    antiDupGui.Name = "KJY_Team_AntiDup"
    antiDupGui.Parent = game:GetService("CoreGui")
    game:GetService("Players").PlayerRemoving:Connect(function(player)
        if player == game:GetService("Players").LocalPlayer then antiDupGui:Destroy() end
    end)
    return true
end

if not AntiMultiOpen() then return end

-- ÁôΩÂêçÂçïÈ™åËØÅ
local player = game:GetService("Players").LocalPlayer
local function checkWhitelist()
    local playerName = player.Name
    local success, isWhitelisted = pcall(function()
        local list = game:HttpGet("https://raw.githubusercontent.com/qiaoxxyxx/Roblox/refs/heads/main/whitelist.txt")
        local whitelist = {}
        for name in list:gmatch("[^,]+") do whitelist[name:gsub("%s+","")] = true end
        return whitelist[playerName]
    end)
    if not success or not isWhitelisted then
        player:Kick("Unauthorized user")
        return false
    end
    return true
end

if not checkWhitelist() then return end

-- Èò≤AFKÂäüËÉΩ
local function setupAntiAFK()
    local success, err = pcall(function()
        if player and player.Idled then
            player.Idled:Connect(function()
                local virtualUser = game:GetService("VirtualUser")
                virtualUser:Button2Down(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
                wait(0.5)
                virtualUser:Button2Up(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
            end)
        end
    end)
    
    if not success then
        warn("Anti-AFK setup failed: " .. tostring(err))
    else
        print("Anti-AFK active")
    end
end
setupAntiAFK()

-- ÂàõÂª∫UI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "MobileWindUI"
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
screenGui.Parent = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui")

local viewportSize = workspace.CurrentCamera.ViewportSize
local mainWindow = Instance.new("Frame")
mainWindow.Name = "MainWindow"
mainWindow.Size = UDim2.new(0, 380, 0, 450)
mainWindow.Position = UDim2.new(0, 20, 0, 50)
mainWindow.BackgroundColor3 = Color3.fromRGB(255, 240, 245)
mainWindow.BorderSizePixel = 0
mainWindow.ZIndex = 10
mainWindow.Parent = screenGui

local backgroundGradient = Instance.new("UIGradient")
backgroundGradient.Rotation = 90
backgroundGradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 250, 255)),
    ColorSequenceKeypoint.new(0.3, Color3.fromRGB(255, 235, 245)),
    ColorSequenceKeypoint.new(0.7, Color3.fromRGB(255, 220, 235)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(255, 210, 225))
})
backgroundGradient.Parent = mainWindow

local uiCorner = Instance.new("UICorner")
uiCorner.CornerRadius = UDim.new(0, 16)
uiCorner.Parent = mainWindow

local uiStroke = Instance.new("UIStroke")
uiStroke.Color = Color3.fromRGB(255, 160, 200)
uiStroke.Thickness = 3
uiStroke.Parent = mainWindow

-- Á≤íÂ≠êÊïàÊûú
local particleContainer = Instance.new("Frame")
particleContainer.Name = "ParticleContainer"
particleContainer.Size = UDim2.new(1, 0, 1, 0)
particleContainer.BackgroundTransparency = 1
particleContainer.ZIndex = 1
particleContainer.Parent = mainWindow

local function createParticles()
    for i = 1, 30 do
        local particle = Instance.new("TextLabel")
        particle.Name = "Particle_" .. i
        particle.Size = UDim2.new(0, 30, 0, 30)
        particle.BackgroundTransparency = 1
        particle.Text = "Ysia"
        particle.TextColor3 = Color3.fromRGB(
            math.random(200, 255),
            math.random(100, 200),
            math.random(150, 220)
        )
        particle.TextTransparency = 0.7
        particle.TextSize = math.random(12, 16)
        particle.Font = Enum.Font.GothamBold
        particle.ZIndex = 1
        
        local centerX = 0.5
        local centerY = 0.5
        local startDistance = math.random() * 0.3
        local startAngle = math.random() * 2 * math.pi
        
        local startX = centerX + math.cos(startAngle) * startDistance
        local startY = centerY + math.sin(startAngle) * startDistance
        
        particle.Position = UDim2.new(startX, -15, startY, -15)
        particle.Parent = particleContainer
        
        local speed = math.random(0.5, 1.5) * 0.003
        local angle = math.random() * 2 * math.pi
        local moveX = math.cos(angle) * speed
        local moveY = math.sin(angle) * speed
        
        local fadeSpeed = math.random(0.02, 0.05)
        local rotationSpeed = math.random(-2, 2)
        
        coroutine.wrap(function()
            local transparency = 0.7
            local rotation = 0
            
            while particle and particle.Parent and transparency < 1 do
                local currentX = particle.Position.X.Scale + moveX
                local currentY = particle.Position.Y.Scale + moveY
                
                particle.Position = UDim2.new(currentX, -15, currentY, -15)
                
                transparency = transparency + fadeSpeed
                particle.TextTransparency = transparency
                
                rotation = rotation + rotationSpeed
                particle.Rotation = rotation
                
                if currentX < -0.5 or currentX > 1.5 or currentY < -0.5 or currentY > 1.5 then
                    particle:Destroy()
                    break
                end
                
                task.wait(0.02)
            end
            
            if particle and particle.Parent then
                particle:Destroy()
            end
        end)()
    end
end

createParticles()
task.spawn(function()
    while task.wait(2) do
        if #particleContainer:GetChildren() < 20 then
            createParticles()
        end
    end
end)

-- Ê†áÈ¢òÊ†è
local titleBar = Instance.new("TextButton")
titleBar.Name = "TitleBar"
titleBar.Size = UDim2.new(1, 0, 0, 35)
titleBar.BackgroundColor3 = Color3.fromRGB(255, 225, 235)
titleBar.Text = ""
titleBar.AutoButtonColor = false
titleBar.ZIndex = 11
titleBar.Parent = mainWindow

local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 16, 0, 0)
titleCorner.Parent = titleBar

local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(0.6, 0, 1, 0)
titleLabel.Position = UDim2.new(0, 10, 0, 0)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "Speed Training Pro"
titleLabel.TextColor3 = Color3.fromRGB(200, 70, 130)
titleLabel.TextSize = 14
titleLabel.Font = Enum.Font.GothamBold
titleLabel.TextXAlignment = Enum.TextXAlignment.Left
titleLabel.ZIndex = 12
titleLabel.Parent = titleBar

local strengthLabel = Instance.new("TextLabel")
strengthLabel.Size = UDim2.new(0.4, 0, 1, 0)
strengthLabel.Position = UDim2.new(0.6, -10, 0, 0)
strengthLabel.BackgroundTransparency = 1
strengthLabel.Text = "üí™ 0"
strengthLabel.TextColor3 = Color3.fromRGB(180, 100, 150)
strengthLabel.TextSize = 12
strengthLabel.Font = Enum.Font.GothamBold
strengthLabel.TextXAlignment = Enum.TextXAlignment.Right
strengthLabel.ZIndex = 12
strengthLabel.Parent = titleBar

local minimizeButton = Instance.new("TextButton")
minimizeButton.Name = "MinimizeButton"
minimizeButton.Size = UDim2.new(0, 28, 0, 28)
minimizeButton.Position = UDim2.new(1, -65, 0.5, -14)
minimizeButton.AnchorPoint = Vector2.new(0.5, 0.5)
minimizeButton.BackgroundColor3 = Color3.fromRGB(255, 200, 220)
minimizeButton.Text = "‚îÄ"
minimizeButton.TextColor3 = Color3.fromRGB(180, 60, 120)
minimizeButton.TextSize = 20
minimizeButton.Font = Enum.Font.GothamBold
minimizeButton.AutoButtonColor = false
minimizeButton.ZIndex = 12
minimizeButton.Parent = titleBar

local minimizeCorner = Instance.new("UICorner")
minimizeCorner.CornerRadius = UDim.new(0, 6)
minimizeCorner.Parent = minimizeButton

local closeButton = Instance.new("TextButton")
closeButton.Name = "CloseButton"
closeButton.Size = UDim2.new(0, 28, 0, 28)
closeButton.Position = UDim2.new(1, -30, 0.5, -14)
closeButton.AnchorPoint = Vector2.new(0.5, 0.5)
closeButton.BackgroundColor3 = Color3.fromRGB(255, 200, 220)
closeButton.Text = "‚úï"
closeButton.TextColor3 = Color3.fromRGB(180, 60, 120)
closeButton.TextSize = 16
closeButton.Font = Enum.Font.GothamBold
closeButton.AutoButtonColor = false
closeButton.ZIndex = 12
closeButton.Parent = titleBar

local closeCorner = Instance.new("UICorner")
closeCorner.CornerRadius = UDim.new(0, 6)
closeCorner.Parent = closeButton

-- ÁªüËÆ°Ê°Ü
local statsFrame = Instance.new("Frame")
statsFrame.Name = "StatsFrame"
statsFrame.Size = UDim2.new(1, -20, 0, 90)
statsFrame.Position = UDim2.new(0, 10, 0, 40)
statsFrame.BackgroundColor3 = Color3.fromRGB(255, 245, 250)
statsFrame.BorderSizePixel = 0
statsFrame.ZIndex = 11
statsFrame.Parent = mainWindow

local statsCorner = Instance.new("UICorner")
statsCorner.CornerRadius = UDim.new(0, 10)
statsCorner.Parent = statsFrame

local statsStroke = Instance.new("UIStroke")
statsStroke.Color = Color3.fromRGB(255, 180, 210)
statsStroke.Thickness = 2
statsStroke.Parent = statsFrame

local leftColumn = Instance.new("Frame")
leftColumn.Name = "LeftColumn"
leftColumn.Size = UDim2.new(0.5, -5, 1, 0)
leftColumn.Position = UDim2.new(0, 10, 0, 0)
leftColumn.BackgroundTransparency = 1
leftColumn.ZIndex = 12
leftColumn.Parent = statsFrame

local leftGrid = Instance.new("UIGridLayout")
leftGrid.CellSize = UDim2.new(1, -5, 0.33, -3)
leftGrid.CellPadding = UDim2.new(0, 0, 0, 2)
leftGrid.StartCorner = Enum.StartCorner.TopLeft
leftGrid.Parent = leftColumn

-- Â∑¶‰æßÈ°πÁõÆÔºöÂΩìÂâçÈÄüÂ∫¶„ÄÅÊó•Â¢û„ÄÅÊúàÂ¢û
local leftItems = {
    {id = "current_speed", name = "Current Speed:", color = Color3.fromRGB(100, 220, 150)},
    {id = "daily_gain", name = "Daily Est:", color = Color3.fromRGB(255, 140, 100)},
    {id = "monthly_gain", name = "Monthly Est:", color = Color3.fromRGB(220, 180, 100)}
}

local leftLabels = {}
for i, item in ipairs(leftItems) do
    local itemFrame = Instance.new("Frame")
    itemFrame.Name = item.id
    itemFrame.BackgroundTransparency = 1
    itemFrame.Parent = leftColumn
    local nameLabel = Instance.new("TextLabel")
    nameLabel.Size = UDim2.new(0.6, 0, 1, 0)
    nameLabel.BackgroundTransparency = 1
    nameLabel.Text = item.name
    nameLabel.TextColor3 = Color3.fromRGB(150, 100, 130)
    nameLabel.TextSize = 11
    nameLabel.Font = Enum.Font.Gotham
    nameLabel.TextXAlignment = Enum.TextXAlignment.Left
    nameLabel.Parent = itemFrame
    local valueLabel = Instance.new("TextLabel")
    valueLabel.Name = "Value"
    valueLabel.Size = UDim2.new(0.4, 0, 1, 0)
    valueLabel.Position = UDim2.new(0.6, 0, 0, 0)
    valueLabel.BackgroundTransparency = 1
    valueLabel.Text = "0"
    valueLabel.TextColor3 = item.color
    valueLabel.TextSize = 10
    valueLabel.Font = Enum.Font.GothamBold
    valueLabel.TextXAlignment = Enum.TextXAlignment.Right
    valueLabel.Parent = itemFrame
    leftLabels[item.id] = valueLabel
end

local rightColumn = Instance.new("Frame")
rightColumn.Name = "RightColumn"
rightColumn.Size = UDim2.new(0.5, -5, 1, 0)
rightColumn.Position = UDim2.new(0.5, 5, 0, 0)
rightColumn.BackgroundTransparency = 1
rightColumn.ZIndex = 12
rightColumn.Parent = statsFrame

local rightGrid = Instance.new("UIGridLayout")
rightGrid.CellSize = UDim2.new(1, -5, 0.33, -3)
rightGrid.CellPadding = UDim2.new(0, 0, 0, 2)
rightGrid.StartCorner = Enum.StartCorner.TopLeft
rightGrid.Parent = rightColumn

-- Âè≥‰æßÈ°πÁõÆÔºöÂΩìÂâçÂäõÈáè„ÄÅÂπ¥Â¢û„ÄÅÊÄªÂäõÈáè
local rightItems = {
    {id = "current_strength", name = "Current Str:", color = Color3.fromRGB(220, 100, 150)},
    {id = "yearly_gain", name = "Yearly Est:", color = Color3.fromRGB(100, 180, 255)},
    {id = "total_1year", name = "1 Year Total:", color = Color3.fromRGB(150, 100, 220)}
}

local rightLabels = {}
for i, item in ipairs(rightItems) do
    local itemFrame = Instance.new("Frame")
    itemFrame.Name = item.id
    itemFrame.BackgroundTransparency = 1
    itemFrame.Parent = rightColumn
    local nameLabel = Instance.new("TextLabel")
    nameLabel.Size = UDim2.new(0.6, 0, 1, 0)
    nameLabel.BackgroundTransparency = 1
    nameLabel.Text = item.name
    nameLabel.TextColor3 = Color3.fromRGB(150, 100, 130)
    nameLabel.TextSize = 11
    nameLabel.Font = Enum.Font.Gotham
    nameLabel.TextXAlignment = Enum.TextXAlignment.Left
    nameLabel.Parent = itemFrame
    local valueLabel = Instance.new("TextLabel")
    valueLabel.Name = "Value"
    valueLabel.Size = UDim2.new(0.4, 0, 1, 0)
    valueLabel.Position = UDim2.new(0.6, 0, 0, 0)
    valueLabel.BackgroundTransparency = 1
    valueLabel.Text = "0"
    valueLabel.TextColor3 = item.color
    valueLabel.TextSize = 10
    valueLabel.Font = Enum.Font.GothamBold
    valueLabel.TextXAlignment = Enum.TextXAlignment.Right
    valueLabel.Parent = itemFrame
    rightLabels[item.id] = valueLabel
end

-- ÊåâÈíÆÊ°Ü
local buttonsFrame = Instance.new("Frame")
buttonsFrame.Name = "ButtonsFrame"
buttonsFrame.Size = UDim2.new(1, -20, 0, 280)
buttonsFrame.Position = UDim2.new(0, 10, 0, 140)
buttonsFrame.BackgroundTransparency = 1
buttonsFrame.ZIndex = 11
buttonsFrame.Parent = mainWindow

local buttonContainer = Instance.new("ScrollingFrame")
buttonContainer.Name = "ButtonContainer"
buttonContainer.Size = UDim2.new(1, 0, 1, 0)
buttonContainer.BackgroundTransparency = 1
buttonContainer.ScrollBarThickness = 3
buttonContainer.ScrollBarImageColor3 = Color3.fromRGB(255, 180, 210)
buttonContainer.CanvasSize = UDim2.new(0, 0, 0, 0)
buttonContainer.ZIndex = 12
buttonContainer.Parent = buttonsFrame

local buttonList = Instance.new("UIListLayout")
buttonList.Padding = UDim.new(0, 6)
buttonList.Parent = buttonContainer

-- ÊãñÊãΩÂäüËÉΩ
local isMinimized = false
local originalSize = mainWindow.Size
local isDragging = false
local dragStart, windowStart = Vector2.new(0, 0), Vector2.new(0, 0)

local function setupDragging()
    local dragInput
    local dragStart
    local startPos
    
    local function beginDrag(input)
        if (input.UserInputType == Enum.UserInputType.MouseButton1 or 
            input.UserInputType == Enum.UserInputType.Touch) then
            isDragging = true
            dragStart = input.Position
            startPos = Vector2.new(mainWindow.Position.X.Offset, mainWindow.Position.Y.Offset)
            mainWindow.ZIndex = 20
            
            mainWindow.BackgroundColor3 = Color3.fromRGB(255, 230, 240)
            uiStroke.Color = Color3.fromRGB(255, 140, 180)
            
            local connection
            connection = input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    isDragging = false
                    connection:Disconnect()
                    mainWindow.BackgroundColor3 = Color3.fromRGB(255, 240, 245)
                    uiStroke.Color = Color3.fromRGB(255, 160, 200)
                    mainWindow.ZIndex = 10
                end
            end)
        end
    end
    
    local function endDrag(input)
        if (input.UserInputType == Enum.UserInputType.MouseButton1 or 
            input.UserInputType == Enum.UserInputType.Touch) then
            isDragging = false
        end
    end
    
    local function updateDrag(input)
        if not isDragging then return end
        
        if input.UserInputType == Enum.UserInputType.MouseMovement or 
           input.UserInputType == Enum.UserInputType.Touch then
            local delta = input.Position - dragStart
            
            -- ÂÖÅËÆ∏ÁßªÂä®Âà∞Â±èÂπïÂ§ñ
            local newX = startPos.X + delta.X
            local newY = startPos.Y + delta.Y
            
            -- ÁßªÈô§ËæπÁïåÈôêÂà∂ÔºåÂÖÅËÆ∏‰ªªÊÑè‰ΩçÁΩÆ
            mainWindow.Position = UDim2.new(0, newX, 0, newY)
        end
    end
    
    local function makeDraggable(frame)
        frame.InputBegan:Connect(function(input)
            beginDrag(input)
        end)
        
        frame.InputEnded:Connect(function(input)
            endDrag(input)
        end)
        
        if frame:IsA("GuiButton") then
            frame.MouseEnter:Connect(function()
                if not isDragging then
                    frame.BackgroundColor3 = Color3.fromRGB(255, 245, 250)
                end
            end)
            
            frame.MouseLeave:Connect(function()
                if not isDragging then
                    frame.BackgroundColor3 = Color3.fromRGB(255, 240, 245)
                end
            end)
        end
    end
    
    -- ‰∏∫Â§ö‰∏™Âå∫ÂüüÊ∑ªÂä†ÊãñÊãΩÂäüËÉΩ
    makeDraggable(mainWindow)
    makeDraggable(titleBar)
    makeDraggable(statsFrame)
    makeDraggable(buttonsFrame)
    
    -- Â§ÑÁêÜÊãñÊãΩÁßªÂä®
    game:GetService("UserInputService").InputChanged:Connect(function(input)
        updateDrag(input)
    end)
    
    -- Â§ÑÁêÜÊãñÊãΩÁªìÊùü
    game:GetService("UserInputService").InputEnded:Connect(function(input)
        endDrag(input)
    end)
    
    -- Ê∑ªÂä†ÈîÆÁõòÂø´Êç∑ÈîÆÔºöÊåâRÈîÆÈáçÁΩÆÁ™óÂè£‰ΩçÁΩÆ
    game:GetService("UserInputService").InputBegan:Connect(function(input, gameProcessed)
        if not gameProcessed then
            if input.KeyCode == Enum.KeyCode.R then
                -- ÈáçÁΩÆÁ™óÂè£Âà∞ÂàùÂßã‰ΩçÁΩÆ
                mainWindow.Position = UDim2.new(0, 20, 0, 50)
                print("Window position reset to (20, 50)")
            elseif input.KeyCode == Enum.KeyCode.T then
                -- Â∞ÜÁ™óÂè£ÁßªÂä®Âà∞Â±èÂπï‰∏≠ÂøÉ
                local windowWidth = mainWindow.Size.X.Offset
                local windowHeight = mainWindow.Size.Y.Offset
                local centerX = (viewportSize.X - windowWidth) / 2
                local centerY = (viewportSize.Y - windowHeight) / 2
                mainWindow.Position = UDim2.new(0, centerX, 0, centerY)
                print("Window moved to center")
            end
        end
    end)
end

setupDragging()

-- Ê∑ªÂä†‰∏Ä‰∏™Â∞èÁöÑÈáçÁΩÆ‰ΩçÁΩÆÊåâÈíÆÔºàÂèØÈÄâÔºâ
local resetButton = Instance.new("TextButton")
resetButton.Name = "ResetPositionButton"
resetButton.Size = UDim2.new(0, 20, 0, 20)
resetButton.Position = UDim2.new(1, -25, 1, -25)
resetButton.BackgroundColor3 = Color3.fromRGB(255, 200, 220)
resetButton.Text = "R"
resetButton.TextColor3 = Color3.fromRGB(180, 60, 120)
resetButton.TextSize = 10
resetButton.Font = Enum.Font.GothamBold
resetButton.AutoButtonColor = false
resetButton.ZIndex = 20
resetButton.Parent = mainWindow

local resetCorner = Instance.new("UICorner")
resetCorner.CornerRadius = UDim.new(0, 4)
resetCorner.Parent = resetButton

resetButton.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or 
       input.UserInputType == Enum.UserInputType.Touch then
        resetButton.BackgroundColor3 = Color3.fromRGB(255, 180, 200)
    end
end)

resetButton.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or 
       input.UserInputType == Enum.UserInputType.Touch then
        resetButton.BackgroundColor3 = Color3.fromRGB(255, 200, 220)
        mainWindow.Position = UDim2.new(0, 20, 0, 50)
    end
end)

resetButton.MouseEnter:Connect(function()
    resetButton.BackgroundColor3 = Color3.fromRGB(255, 190, 215)
end)

resetButton.MouseLeave:Connect(function()
    resetButton.BackgroundColor3 = Color3.fromRGB(255, 200, 220)
end)

-- Á™óÂè£ÊéßÂà∂
local function toggleMinimize()
    isMinimized = not isMinimized
    if isMinimized then
        mainWindow.Size = UDim2.new(0, mainWindow.Size.X.Offset, 0, 35)
        statsFrame.Visible = false
        buttonsFrame.Visible = false
        minimizeButton.Text = "+"
        titleCorner.CornerRadius = UDim.new(0, 16)
    else
        mainWindow.Size = originalSize
        statsFrame.Visible = true
        buttonsFrame.Visible = true
        minimizeButton.Text = "‚îÄ"
        titleCorner.CornerRadius = UDim.new(0, 16, 0, 0)
    end
end

minimizeButton.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or 
       input.UserInputType == Enum.UserInputType.Touch then
        minimizeButton.BackgroundColor3 = Color3.fromRGB(255, 180, 200)
    end
end)

minimizeButton.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or 
       input.UserInputType == Enum.UserInputType.Touch then
        toggleMinimize()
        minimizeButton.BackgroundColor3 = Color3.fromRGB(255, 200, 220)
    end
end)

minimizeButton.MouseEnter:Connect(function()
    if not isDragging then minimizeButton.BackgroundColor3 = Color3.fromRGB(255, 190, 215) end
end)

minimizeButton.MouseLeave:Connect(function()
    if not isDragging then minimizeButton.BackgroundColor3 = Color3.fromRGB(255, 200, 220) end
end)

closeButton.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or 
       input.UserInputType == Enum.UserInputType.Touch then
        closeButton.BackgroundColor3 = Color3.fromRGB(255, 180, 200)
    end
end)

closeButton.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or 
       input.UserInputType == Enum.UserInputType.Touch then
        screenGui:Destroy()
        game:GetService("CoreGui"):FindFirstChild("KJY_Team_AntiDup"):Destroy()
    end
end)

closeButton.MouseEnter:Connect(function()
    if not isDragging then
        closeButton.BackgroundColor3 = Color3.fromRGB(255, 190, 215)
        closeButton.TextColor3 = Color3.fromRGB(200, 40, 100)
    end
end)

closeButton.MouseLeave:Connect(function()
    if not isDragging then
        closeButton.BackgroundColor3 = Color3.fromRGB(255, 200, 220)
        closeButton.TextColor3 = Color3.fromRGB(180, 60, 120)
    end
end)

local buttonStates = {}

local function createToggleButton(name, desc, toggleFunction)
    local buttonActive = false
    local buttonFrame = Instance.new("TextButton")
    buttonFrame.Name = name .. "Button"
    buttonFrame.Size = UDim2.new(1, 0, 0, 45)
    buttonFrame.BackgroundColor3 = Color3.fromRGB(255, 235, 245)
    buttonFrame.Text = ""
    buttonFrame.AutoButtonColor = false
    buttonFrame.ZIndex = 12
    buttonFrame.Parent = buttonContainer
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 8)
    buttonCorner.Parent = buttonFrame
    local buttonStroke = Instance.new("UIStroke")
    buttonStroke.Color = Color3.fromRGB(255, 180, 210)
    buttonStroke.Thickness = 2
    buttonStroke.Parent = buttonFrame
    local buttonTitle = Instance.new("TextLabel")
    buttonTitle.Size = UDim2.new(1, -20, 0.7, 0)
    buttonTitle.Position = UDim2.new(0, 10, 0, 0)
    buttonTitle.BackgroundTransparency = 1
    buttonTitle.Text = name
    buttonTitle.TextColor3 = Color3.fromRGB(180, 60, 120)
    buttonTitle.TextSize = 13
    buttonTitle.Font = Enum.Font.GothamBold
    buttonTitle.TextXAlignment = Enum.TextXAlignment.Left
    buttonTitle.ZIndex = 13
    buttonTitle.Parent = buttonFrame
    local buttonDesc = Instance.new("TextLabel")
    buttonDesc.Size = UDim2.new(1, -20, 0.3, 0)
    buttonDesc.Position = UDim2.new(0, 10, 0.7, 0)
    buttonDesc.BackgroundTransparency = 1
    buttonDesc.Text = desc
    buttonDesc.TextColor3 = Color3.fromRGB(150, 90, 120)
    buttonDesc.TextSize = 10
    buttonDesc.Font = Enum.Font.Gotham
    buttonDesc.TextXAlignment = Enum.TextXAlignment.Left
    buttonDesc.ZIndex = 13
    buttonDesc.Parent = buttonFrame
    local statusIndicator = Instance.new("Frame")
    statusIndicator.Name = "StatusIndicator"
    statusIndicator.Size = UDim2.new(0, 6, 0, 6)
    statusIndicator.Position = UDim2.new(1, -20, 0.5, -3)
    statusIndicator.AnchorPoint = Vector2.new(0.5, 0.5)
    statusIndicator.BackgroundColor3 = Color3.fromRGB(220, 150, 180)
    statusIndicator.BorderSizePixel = 0
    statusIndicator.ZIndex = 13
    statusIndicator.Parent = buttonFrame
    local indicatorCorner = Instance.new("UICorner")
    indicatorCorner.CornerRadius = UDim.new(1, 0)
    indicatorCorner.Parent = statusIndicator
    local function updateButtonColors()
        if buttonActive then
            buttonFrame.BackgroundColor3 = Color3.fromRGB(220, 180, 255)
            buttonStroke.Color = Color3.fromRGB(180, 120, 240)
            buttonTitle.TextColor3 = Color3.fromRGB(140, 80, 200)
            buttonDesc.TextColor3 = Color3.fromRGB(160, 120, 210)
            statusIndicator.BackgroundColor3 = Color3.fromRGB(160, 100, 220)
        else
            buttonFrame.BackgroundColor3 = Color3.fromRGB(255, 235, 245)
            buttonStroke.Color = Color3.fromRGB(255, 180, 210)
            buttonTitle.TextColor3 = Color3.fromRGB(180, 60, 120)
            buttonDesc.TextColor3 = Color3.fromRGB(150, 90, 120)
            statusIndicator.BackgroundColor3 = Color3.fromRGB(220, 150, 180)
        end
    end
    updateButtonColors()
    buttonFrame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or 
           input.UserInputType == Enum.UserInputType.Touch then
            if buttonActive then
                buttonFrame.BackgroundColor3 = Color3.fromRGB(200, 160, 240)
                buttonStroke.Color = Color3.fromRGB(160, 100, 220)
            else
                buttonFrame.BackgroundColor3 = Color3.fromRGB(255, 210, 230)
                buttonStroke.Color = Color3.fromRGB(255, 140, 180)
            end
        end
    end)
    buttonFrame.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or 
           input.UserInputType == Enum.UserInputType.Touch then
            buttonActive = not buttonActive
            updateButtonColors()
            if toggleFunction then pcall(toggleFunction, buttonActive) end
            buttonStates[name] = buttonActive
        end
    end)
    buttonFrame.MouseEnter:Connect(function()
        if not isDragging then
            if buttonActive then
                buttonFrame.BackgroundColor3 = Color3.fromRGB(230, 190, 250)
                buttonStroke.Color = Color3.fromRGB(190, 130, 245)
            else
                buttonFrame.BackgroundColor3 = Color3.fromRGB(255, 225, 240)
                buttonStroke.Color = Color3.fromRGB(255, 160, 200)
            end
        end
    end)
    buttonFrame.MouseLeave:Connect(function()
        if not isDragging then updateButtonColors() end
    end)
    buttonStates[name] = {frame = buttonFrame, active = buttonActive, update = updateButtonColors}
    buttonContainer.CanvasSize = UDim2.new(0, 0, 0, #buttonContainer:GetChildren() * 51)
    return {
        toggle = function()
            buttonActive = not buttonActive
            updateButtonColors()
            if toggleFunction then pcall(toggleFunction, buttonActive) end
            buttonStates[name].active = buttonActive
        end,
        setState = function(state)
            buttonActive = state
            updateButtonColors()
            buttonStates[name].active = buttonActive
        end,
        getState = function() return buttonActive end
    }
end

-- ========== ‰∏ªË¶ÅÂäüËÉΩ ==========
local spamTraining = false
local batchSize = 20
local autoEgg = false
local autoShake = false
local lastStrength = 0
local sampleInterval = 1

local function formatNumber(value)
    if value < 1000 then return string.format("%.0f", value) end
    local suffixes = {"K", "M", "B", "T", "Qa", "Qi"}
    local order = math.floor(math.log(value) / math.log(1000))
    local scaled = value / (1000 ^ order)
    return string.format("%.2f%s", scaled, suffixes[order] or "")
end

-- ÊûÅÈÄüÈîªÁÇºÂäüËÉΩ
local function spamExerciseEvents()
    while spamTraining do
        pcall(function()
            local muscleEvent = player.muscleEvent
            for i = 0, batchSize do
                muscleEvent:FireServer("rep")
            end
        end)
        task.wait(0.02)
    end
end

-- Ê£ÄÊü•ÊòØÂê¶ÊúâËõãÁôΩËõãbuff
local function hasProteinBuff()
    local success, hasBuff = pcall(function()
        return player.boostTimersFolder:FindFirstChild("Protein Egg") ~= nil
    end)
    return success and hasBuff
end

-- Ëá™Âä®ÂêÉËõãÂäüËÉΩÔºàÂè™Âú®buffÊ∂àÂ§±ÂêéÊâçÂêÉÔºâ
local speedSamples = {}
local maxSamples = 6

local function getAvgSpeed()
    if #speedSamples == 0 then return 0 end
    local total = 0
    for _, speed in ipairs(speedSamples) do
        total = total + (speed or 0)
    end
    return total / #speedSamples
end

local function eggLoop()
    while autoEgg do
        task.wait(1)  -- ÊØèÁßíÊ£ÄÊü•‰∏ÄÊ¨°
        
        pcall(function()
            -- Ê£ÄÊü•ÊòØÂê¶ÊúâËõãÁôΩËõãbuff
            if not hasProteinBuff() then
                -- buffÂ∑≤Ê∂àÂ§±ÔºåÂèØ‰ª•ÂêÉËõã
                local egg = player.Backpack:FindFirstChild("Protein Egg")
                if egg and player.Character then
                    local humanoid = player.Character:FindFirstChild("Humanoid")
                    if humanoid then
                        -- Ë£ÖÂ§áËõãÁôΩËõã
                        humanoid:EquipTool(egg)
                        task.wait(0.2)
                        
                        -- Ê£ÄÊü•ÊòØÂê¶Ë£ÖÂ§áÊàêÂäü
                        local equippedEgg = player.Character:FindFirstChild("Protein Egg")
                        if equippedEgg then
                            -- ‰ΩøÁî®ËõãÁôΩËõã
                            player.muscleEvent:FireServer("proteinEgg", equippedEgg)
                            task.wait(0.2)
                            
                            -- Âç∏‰∏ãÂ∑•ÂÖ∑
                            humanoid:UnequipTools()
                            print("Protein egg used (buff was missing)")
                        else
                            humanoid:UnequipTools()
                        end
                    end
                else
                    -- Ê≤°ÊúâËõãÁôΩËõãÂú®ËÉåÂåÖ‰∏≠
                    if autoEgg then
                        print("No protein egg in backpack")
                    end
                end
            else
                -- ËøòÊúâbuffÔºåÁ≠âÂæÖbuffÊ∂àÂ§±
                if autoEgg then
                    print("Protein buff active, waiting...")
                end
            end
        end)
    end
end

-- Ëá™Âä®Â•∂ÊòîÂäüËÉΩ
local function shakeLoop()
    while autoShake do
        pcall(function()
            local shake = player.Backpack:FindFirstChild("Tropical Shake")
            if shake and player.Character then
                local humanoid = player.Character:FindFirstChild("Humanoid")
                if humanoid then
                    humanoid:EquipTool(shake)
                    task.wait(0.1)
                    if player.Character:FindFirstChild("Tropical Shake") then
                        player.muscleEvent:FireServer("tropicalShake", player.Character:FindFirstChild("Tropical Shake"))
                        humanoid:UnequipTools()
                    end
                end
            end
        end)
        task.wait(0.1)
    end
end

-- Ê∏ÖÁêÜUIÂäüËÉΩ
local function cleanUI()
    local keywords = {"+","Coins","Coin","Strength","Exp","Experience","Level","Damage","Health"}
    local protected = {"MobileWindUI","Crazy Top","Rayfield", "KJY_Team_AntiDup"}
    local function cleanGui(parent)
        pcall(function()
            for _, gui in ipairs(parent:GetChildren()) do
                if gui:IsA("ScreenGui") then
                    local shouldRemove = true
                    for _, name in ipairs(protected) do
                        if gui.Name:find(name) then shouldRemove = false break end
                    end
                    if shouldRemove then
                        for _, element in ipairs(gui:GetDescendants()) do
                            if (element:IsA("TextLabel") or element:IsA("TextButton")) and element.Text then
                                for _, keyword in ipairs(keywords) do
                                    if element.Text:find(keyword) then gui:Destroy() break end
                                end
                            end
                        end
                    end
                end
            end
        end)
    end
    cleanGui(game:GetService("CoreGui"))
    if player:FindFirstChild("PlayerGui") then
        cleanGui(player.PlayerGui)
    end
end

-- ÂàõÂª∫ÂäüËÉΩÊåâÈíÆ
local speedToggle = createToggleButton("Speed Training", "Rapid batch training", function(state)
    spamTraining = state
    if state then
        task.spawn(spamExerciseEvents)
    end
end)

local eggToggle = createToggleButton("Auto Protein Egg", "Auto use protein egg (when buff ends)", function(state)
    autoEgg = state
    if state then
        print("Auto egg enabled - will use when protein buff ends")
        task.spawn(eggLoop)
    else
        print("Auto egg disabled")
    end
end)

local shakeToggle = createToggleButton("Auto Tropical Shake", "Auto use shake", function(state)
    autoShake = state
    if state then
        task.spawn(shakeLoop)
    end
end)

-- Ê∏ÖÁêÜUIÊåâÈíÆ
local cleanButton = Instance.new("TextButton")
cleanButton.Name = "CleanUIButton"
cleanButton.Size = UDim2.new(1, 0, 0, 45)
cleanButton.BackgroundColor3 = Color3.fromRGB(255, 235, 245)
cleanButton.Text = ""
cleanButton.AutoButtonColor = false
cleanButton.ZIndex = 12
cleanButton.Parent = buttonContainer

local cleanCorner = Instance.new("UICorner")
cleanCorner.CornerRadius = UDim.new(0, 8)
cleanCorner.Parent = cleanButton

local cleanStroke = Instance.new("UIStroke")
cleanStroke.Color = Color3.fromRGB(255, 180, 210)
cleanStroke.Thickness = 2
cleanStroke.Parent = cleanButton

local cleanTitle = Instance.new("TextLabel")
cleanTitle.Size = UDim2.new(1, -20, 0.7, 0)
cleanTitle.Position = UDim2.new(0, 10, 0, 0)
cleanTitle.BackgroundTransparency = 1
cleanTitle.Text = "Clean UI"
cleanTitle.TextColor3 = Color3.fromRGB(180, 60, 120)
cleanTitle.TextSize = 13
cleanTitle.Font = Enum.Font.GothamBold
cleanTitle.TextXAlignment = Enum.TextXAlignment.Left
cleanTitle.ZIndex = 13
cleanTitle.Parent = cleanButton

local cleanDesc = Instance.new("TextLabel")
cleanDesc.Size = UDim2.new(1, -20, 0.3, 0)
cleanDesc.Position = UDim2.new(0, 10, 0.7, 0)
cleanDesc.BackgroundTransparency = 1
cleanDesc.Text = "Remove gain notifications"
cleanDesc.TextColor3 = Color3.fromRGB(150, 90, 120)
cleanDesc.TextSize = 10
cleanDesc.Font = Enum.Font.Gotham
cleanDesc.TextXAlignment = Enum.TextXAlignment.Left
cleanDesc.ZIndex = 13
cleanDesc.Parent = cleanButton

cleanButton.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or 
       input.UserInputType == Enum.UserInputType.Touch then
        cleanButton.BackgroundColor3 = Color3.fromRGB(255, 210, 230)
        cleanStroke.Color = Color3.fromRGB(255, 140, 180)
    end
end)

cleanButton.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or 
       input.UserInputType == Enum.UserInputType.Touch then
        cleanButton.BackgroundColor3 = Color3.fromRGB(255, 225, 240)
        cleanStroke.Color = Color3.fromRGB(255, 160, 200)
        cleanUI()
    end
end)

cleanButton.MouseEnter:Connect(function()
    if not isDragging then
        cleanButton.BackgroundColor3 = Color3.fromRGB(255, 225, 240)
        cleanStroke.Color = Color3.fromRGB(255, 160, 200)
    end
end)

cleanButton.MouseLeave:Connect(function()
    if not isDragging then
        cleanButton.BackgroundColor3 = Color3.fromRGB(255, 235, 245)
        cleanStroke.Color = Color3.fromRGB(255, 180, 210)
    end
end)

buttonContainer.CanvasSize = UDim2.new(0, 0, 0, #buttonContainer:GetChildren() * 51)

-- Êõ¥Êñ∞ÁªüËÆ°‰ø°ÊÅØ
task.spawn(function()
    local lastSampleTime = tick()
    
    while screenGui and screenGui.Parent do
        task.wait(sampleInterval)
        
        pcall(function()
            if player and player.leaderstats then
                local strengthStat = player.leaderstats:FindFirstChild("Strength")
                if strengthStat then
                    local currentStrength = strengthStat.Value
                    local currentTime = tick()
                    
                    -- Êõ¥Êñ∞Ê†áÈ¢òÊ†èÂäõÈáèÊòæÁ§∫
                    strengthLabel.Text = "üí™ " .. formatNumber(currentStrength)
                    
                    -- Êõ¥Êñ∞ÁªüËÆ°Ê°ÜÂäõÈáèÊòæÁ§∫
                    rightLabels.current_strength.Text = formatNumber(currentStrength)
                    
                    if lastStrength > 0 then
                        -- ËÆ°ÁÆóÂΩìÂâçÈÄüÂ∫¶
                        local gain = currentStrength - lastStrength
                        local timeDiff = currentTime - lastSampleTime
                        local currentSpeed = gain / math.max(0.1, timeDiff)
                        
                        -- Ê∑ªÂä†ÈÄüÂ∫¶Ê†∑Êú¨
                        table.insert(speedSamples, currentSpeed)
                        while #speedSamples > maxSamples do
                            table.remove(speedSamples, 1)
                        end
                        
                        -- ËÆ°ÁÆóÂπ≥ÂùáÈÄüÂ∫¶
                        local avgSpeed = getAvgSpeed()
                        
                        -- Êõ¥Êñ∞Â∑¶‰æßÁªüËÆ°
                        leftLabels.current_speed.Text = string.format("%.1f/s", currentSpeed)
                        
                        -- ËÆ°ÁÆóÊó•Â¢û„ÄÅÊúàÂ¢û„ÄÅÂπ¥Â¢û
                        if avgSpeed > 0 then
                            local secondsPerDay = 24 * 60 * 60
                            local secondsPerMonth = 30 * secondsPerDay
                            local secondsPerYear = 365 * secondsPerDay
                            
                            local dailyGain = avgSpeed * secondsPerDay
                            local monthlyGain = avgSpeed * secondsPerMonth
                            local yearlyGain = avgSpeed * secondsPerYear
                            local totalOneYear = currentStrength + yearlyGain
                            
                            leftLabels.daily_gain.Text = formatNumber(dailyGain)
                            leftLabels.monthly_gain.Text = formatNumber(monthlyGain)
                            rightLabels.yearly_gain.Text = formatNumber(yearlyGain)
                            rightLabels.total_1year.Text = formatNumber(totalOneYear)
                        else
                            leftLabels.daily_gain.Text = "0"
                            leftLabels.monthly_gain.Text = "0"
                            rightLabels.yearly_gain.Text = "0"
                            rightLabels.total_1year.Text = formatNumber(currentStrength)
                        end
                    else
                        -- È¶ñÊ¨°ËøêË°å
                        leftLabels.current_speed.Text = "0/s"
                        leftLabels.daily_gain.Text = "0"
                        leftLabels.monthly_gain.Text = "0"
                        rightLabels.yearly_gain.Text = "0"
                        rightLabels.total_1year.Text = formatNumber(currentStrength)
                    end
                    
                    lastStrength = currentStrength
                    lastSampleTime = currentTime
                end
            end
        end)
    end
end)

print("Script loaded successfully!")
